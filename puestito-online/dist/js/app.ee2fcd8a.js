(function(){"use strict";var o={4300:function(o,e,a){var t=a(8355),r=a(5130),i=a(6768);const n={class:"body"};function s(o,e,a,t,r,s){const c=(0,i.g2)("router-view"),l=(0,i.g2)("PieComponent");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",n,[(0,i.bF)(c)]),(0,i.bF)(l)])}var c=a(4232);const l=o=>((0,i.Qi)("data-v-12ebe393"),o=o(),(0,i.jt)(),o),d={class:"text-center p-2"},u=l((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"22",alt:""},null,-1))),p=l((()=>(0,i.Lk)("div",{style:{"margin-left":"10px",display:"inline"}}," Puestito Online ",-1))),m=l((()=>(0,i.Lk)("a",{style:{"margin-left":"10px"},href:"http://instagram.com/nazadoto.com",target:"_blank"},[(0,i.Lk)("img",{src:"/recursos/instagram.png",width:"20",alt:""})],-1)));function g(o,e,a,t,r,n){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("footer",{class:(0,c.C4)(["text-center",{"margen-logueado":r.logueado}])},[(0,i.Lk)("div",d,[(0,i.bF)(s,{to:"/"},{default:(0,i.k6)((()=>[u])),_:1}),p,m])],2)}var b={data(){return{logueado:!1}},mounted(){localStorage.getItem("usuario")?this.logueado=!0:this.logueado=!1}},h=a(1241);const v=(0,h.A)(b,[["render",g],["__scopeId","data-v-12ebe393"]]);var k=v,f=(a(8077),{name:"App",components:{PieComponent:k},methods:{},mounted(){window.scrollTo({top:0,behavior:"smooth"})}});const L=(0,h.A)(f,[["render",s]]);var C=L,y=a(1387);const w=o=>((0,i.Qi)("data-v-36607664"),o=o(),(0,i.jt)(),o),x={class:"todo"},P={class:"container pt-4 mb-2"},E={class:"text-center"},S={key:0,class:"container"},M={class:"col-md-6 mt-2"},I={key:1,class:"text-center"},A=["src"],_=w((()=>(0,i.Lk)("hr",null,null,-1))),T={class:"botones"},N=w((()=>(0,i.Lk)("img",{src:"/recursos/user.png",width:"50",height:"50",alt:"User"},null,-1))),q=w((()=>(0,i.Lk)("img",{src:"/recursos/qr.png",width:"50",height:"50",alt:"QR"},null,-1))),F={class:"botones mt-2"},X=w((()=>(0,i.Lk)("img",{src:"/recursos/productos.png",width:"50",height:"50",alt:"Productos"},null,-1))),U=w((()=>(0,i.Lk)("img",{src:"/recursos/image.png",width:"50",height:"50",alt:"QR"},null,-1))),R={class:"botones mt-2"},V=w((()=>(0,i.Lk)("img",{src:"/recursos/mipuestito.png",width:"50",height:"50",alt:"User"},null,-1))),z=w((()=>(0,i.Lk)("img",{src:"/recursos/support.png",width:"50",height:"50",alt:"User"},null,-1))),Q=w((()=>(0,i.Lk)("hr",null,null,-1))),D={class:"center"},W=w((()=>(0,i.Lk)("button",{class:"btn-menu-danger","data-bs-toggle":"modal","data-bs-target":"#cerrarSesionModal"}," Cerrar Sesión ",-1))),$={class:"modal fade",id:"cerrarSesionModal",tabindex:"-1","aria-labelledby":"cerrarSesionModalLabel","aria-hidden":"true"},B={class:"modal-dialog"},j={class:"modal-content"},O=w((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"cerrarSesionModalLabel"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),J={class:"modal-footer text-center"},G=w((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function H(o,e,a,t,r,n){const s=(0,i.g2)("NavbarAdminComponent"),l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",x,[n.esAdmin()?((0,i.uX)(),(0,i.Wv)(s,{key:0})):(0,i.Q3)("",!0),(0,i.Lk)("div",P,[(0,i.Lk)("h1",E,"Bienvenid@, "+(0,c.v_)(r.nombreNegocio),1),n.esAdmin()?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.Lk)("div",M,[(0,i.bF)(l,{class:"btn btn-menu",to:"/u/negocios"},{default:(0,i.k6)((()=>[(0,i.eW)("Listar Negocios")])),_:1})])])):((0,i.uX)(),(0,i.CE)("div",I,[r.negocio.imagen?((0,i.uX)(),(0,i.CE)("img",{key:0,style:{"border-radius":"100%"},src:r.negocio.imagen,width:"100",alt:""},null,8,A)):(0,i.Q3)("",!0),_,(0,i.Lk)("div",T,[(0,i.bF)(l,{class:"btn-inicio",to:"/u/modificar"},{default:(0,i.k6)((()=>[N,(0,i.eW)(" Perfil")])),_:1}),(0,i.bF)(l,{to:"/u/crearqr",class:"btn-inicio"},{default:(0,i.k6)((()=>[q,(0,i.eW)(" Crear QR ")])),_:1})]),(0,i.Lk)("div",F,[(0,i.bF)(l,{class:"btn-inicio",to:"/u/productos"},{default:(0,i.k6)((()=>[X,(0,i.eW)("Productos")])),_:1}),(0,i.bF)(l,{to:"/u/publicaciones",class:"btn-inicio"},{default:(0,i.k6)((()=>[U,(0,i.eW)("Publicaciones ")])),_:1})]),(0,i.Lk)("div",R,[(0,i.bF)(l,{to:"/"+r.nombreUsuario,class:"btn-inicio"},{default:(0,i.k6)((()=>[V,(0,i.eW)(" Mi Puestito ")])),_:1},8,["to"]),(0,i.Lk)("a",{class:"btn-inicio",onClick:e[0]||(e[0]=(...o)=>n.enviarMensaje&&n.enviarMensaje(...o))},[z,(0,i.eW)(" Soporte ")])]),Q,(0,i.Lk)("div",D,[W,(0,i.Lk)("div",$,[(0,i.Lk)("div",B,[(0,i.Lk)("div",j,[O,(0,i.Lk)("div",J,[G,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=(...o)=>n.cerrarSesion&&n.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])])]))])])}a(4114);const K=o=>((0,i.Qi)("data-v-ef922fbe"),o=o(),(0,i.jt)(),o),Y={class:""},Z={class:"navbar navbar-expand-lg navbar-dark bg-dark"},oo={class:"container-fluid"},eo=K((()=>(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDarkDropdown","aria-controls":"navbarNavDarkDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1))),ao={class:"collapse navbar-collapse",id:"navbarNavDarkDropdown"},to={class:"navbar-nav"},ro={class:"test nav-item"},io={class:"test nav-item"},no={class:"test nav-item"},so=K((()=>(0,i.Lk)("button",{class:"nav-link","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Salir ",-1))),co={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},lo={class:"modal-dialog"},uo={class:"modal-content"},po=K((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),mo={class:"modal-footer text-center"},go=K((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function bo(o,e,a,t,r,n){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Y,[(0,i.Lk)("nav",Z,[(0,i.Lk)("div",oo,[(0,i.bF)(s,{class:"navbar-brand",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)((0,c.v_)(n.leerUsuario())+" | ",1)])),_:1}),eo,(0,i.Lk)("div",ao,[(0,i.Lk)("ul",to,[(0,i.Lk)("li",ro,[(0,i.bF)(s,{class:"nav-link",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Inicio")])),_:1})]),(0,i.Lk)("li",io,[(0,i.bF)(s,{class:"nav-link",to:"/u/negocios"},{default:(0,i.k6)((()=>[(0,i.eW)("Listar Negocios")])),_:1})]),(0,i.Lk)("li",no,[so,(0,i.Lk)("div",co,[(0,i.Lk)("div",lo,[(0,i.Lk)("div",uo,[po,(0,i.Lk)("div",mo,[go,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...o)=>n.cerrarSesion&&n.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])])])])])])])}var ho={methods:{leerUsuario(){return localStorage.getItem("nombre")},cerrarSesion(){localStorage.clear(),Dg.push("/")}},components:{"router-link":y.Wk}};const vo=(0,h.A)(ho,[["render",bo],["__scopeId","data-v-ef922fbe"]]);var ko=vo,fo=a(4874),Lo=a.n(fo),Co={data(){return{nombreUsuario:"",nombreNegocio:"",negocio:""}},components:{NavbarAdminComponent:ko,"router-link":y.Wk},mounted(){this.leerUsuario(),window.scrollTo({top:0,behavior:"smooth"})},created(){this.obtenerInformacionNegocio()},methods:{enviarMensaje(){const o=navigator.userAgent||navigator.vendor||window.opera,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o);let a=e?"whatsapp://send":"https://web.whatsapp.com/send";const t="¡Hola Puestito Online! Tengo una consulta...",r=`${a}?phone=3853005369&text=${encodeURIComponent(t)}`;try{window.open(r),location.reload(1)}catch(i){Lo().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a WhatsApp."+i.response.data.message})}},async obtenerInformacionNegocio(){try{this.obteniendoInfo=!0;const o=await t.A.get(`/miNegocio?usuario=${localStorage.getItem("usuario")}`);this.negocio=o.data}catch(o){console.error("Error al cargar los productos:",o)}finally{this.obteniendoInfo=!1}},leerUsuario(){this.nombreUsuario=localStorage.getItem("usuario"),this.nombreNegocio=localStorage.getItem("nombre")},esAdmin(){return"admin"==localStorage.getItem("usuario")},cerrarSesion(){localStorage.clear(),Dg.push("/")}}};const yo=(0,h.A)(Co,[["render",H],["__scopeId","data-v-36607664"]]);var wo=yo;const xo=o=>((0,i.Qi)("data-v-76ccaa14"),o=o(),(0,i.jt)(),o),Po={class:"navbar navbar-dark bg-black"},Eo={class:"container"},So={class:"flex space-around"},Mo=xo((()=>(0,i.Lk)("img",{src:"/favicon.ico",alt:"",class:"nav-logo"},null,-1))),Io={class:"inline"},Ao=xo((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"28",fill:"currentColor",class:"bi bi-box-arrow-in-right"},[(0,i.Lk)("path",{d:"M12 20h9"}),(0,i.Lk)("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 0l1 1a2.121 2.121 0 0 1 0 3L7 21H3v-4L16.5 3.5z"})],-1))),_o=xo((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",fill:"currentColor",class:"bi bi-box-arrow-in-right",viewBox:"0 0 16 16"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z"}),(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"})],-1))),To=xo((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",fill:"currentColor",class:"bi bi-box-arrow-in-right",viewBox:"0 0 16 16"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z"}),(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"})],-1))),No={class:"navbar fondo-difu c-white mtb-0"},qo={class:"ancho-busqueda input-group mauto"},Fo={class:"container space-around"},Xo=xo((()=>(0,i.Lk)("option",{value:"Todos",selected:""},"Todos",-1))),Uo=["value"],Ro={class:"container2"},Vo={key:0,class:"pantalla-carga text-center"},zo=xo((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Buscando Puestitos")],-1))),Qo=[zo],Do={key:1},Wo={class:"mt-2"},$o={class:"modalMapa",style:{height:"400px"}},Bo={style:{"max-width":"150px"}},jo={style:{"font-size":"20px"}},Oo=xo((()=>(0,i.Lk)("br",null,null,-1))),Jo={style:{"text-align":"center"}},Go=["href"],Ho=xo((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"20",alt:""},null,-1))),Ko=[Ho],Yo=["href"],Zo=xo((()=>(0,i.Lk)("img",{style:{margin:"0px 10px"},width:"20",src:"/recursos/instagram.png"},null,-1))),oe=[Zo],ee=["href"],ae=xo((()=>(0,i.Lk)("img",{style:{margin:"0px 10px"},width:"20",src:"/recursos/facebook.png"},null,-1))),te=[ae],re={style:{margin:"5px 0px"}},ie=xo((()=>(0,i.Lk)("b",null,"Dirección:",-1))),ne={style:{margin:"5px 0px"}},se=xo((()=>(0,i.Lk)("b",null,"Correo:",-1))),ce={style:{margin:"5px 0px"}},le=xo((()=>(0,i.Lk)("b",null,"Teléfono:",-1))),de={style:{"text-align":"center",margin:"7px 0px"}},ue={class:"titulo-rubro"},pe={class:"categoria-container"},me={class:"carrusel"},ge={key:0,class:"imagen"},be=["src"],he={key:1},ve=xo((()=>(0,i.Lk)("img",{src:"/recursos/missing.png",alt:"",class:"imagen-negocio"},null,-1))),ke=[ve],fe={class:"item-nombre"},Le={key:0,class:"item-btn"},Ce=["onClick"],ye=xo((()=>(0,i.Lk)("img",{src:"/recursos/pin.png",width:"30",alt:""},null,-1))),we=[ye],xe={key:0,class:"text-center mt-3"};function Pe(o,e,a,t,n,s){const l=(0,i.g2)("router-link"),d=(0,i.g2)("GMapMarker"),u=(0,i.g2)("GMapInfoWindow"),p=(0,i.g2)("GMapMap");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("nav",Po,[(0,i.Lk)("div",Eo,[(0,i.Lk)("div",So,[(0,i.bF)(l,{to:"/"},{default:(0,i.k6)((()=>[Mo])),_:1}),(0,i.Lk)("div",Io,[(0,i.bF)(l,{class:"btn-login inline-end c-white",to:"/u/planes"},{default:(0,i.k6)((()=>[(0,i.eW)("Registrar "),Ao])),_:1}),n.usuario?((0,i.uX)(),(0,i.Wv)(l,{key:0,class:"btn-login inline-end c-white",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Mi Puestito "),_o])),_:1})):((0,i.uX)(),(0,i.Wv)(l,{key:1,c:"",lass:"btn-login inline-end c-white",to:"/u/login"},{default:(0,i.k6)((()=>[(0,i.eW)("Ingresar "),To])),_:1}))])])])]),(0,i.Lk)("nav",No,[(0,i.Lk)("div",qo,[(0,i.bo)((0,i.Lk)("input",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar puestitos o rubros...",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]]),n.busqueda?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn-close btn-limpiar-busqueda",onClick:e[1]||(e[1]=(...o)=>s.limpiarBusqueda&&s.limpiarBusqueda(...o))})):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Fo,[(0,i.bo)((0,i.Lk)("select",{class:"navbar-filter",name:"rubro",id:"rubro","onUpdate:modelValue":e[2]||(e[2]=o=>n.rubro=o)},[Xo,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.rubrosUnicos,((o,e)=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:o},(0,c.v_)(o),9,Uo)))),128))],512),[[r.u1,n.rubro]]),(0,i.Lk)("button",{class:"navbar-filter",onClick:e[3]||(e[3]=(...o)=>s.mostrarMapa&&s.mostrarMapa(...o))},(0,c.v_)(n.mapaMostrado2?"Cerrar\n          Mapa":"Abrir Mapa"),1)])]),(0,i.Lk)("div",Ro,[n.cargando?((0,i.uX)(),(0,i.CE)("div",Vo,Qo)):((0,i.uX)(),(0,i.CE)("div",Do,[(0,i.Lk)("div",Wo,[(0,i.bo)((0,i.Lk)("div",$o,[(0,i.bF)(p,{style:{height:"400px"},center:n.mapCenter,zoom:n.zoom,options:n.options},{default:(0,i.k6)((()=>[n.posicionActual?((0,i.uX)(),(0,i.Wv)(d,{key:0,position:n.posicionActual,options:{icon:"/recursos/pinself.png"},title:"Estás aquí."},null,8,["position","options","title"])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.negociosFiltrados,((o,a)=>((0,i.uX)(),(0,i.Wv)(d,{key:a,position:o.location,title:o.nombre,onClick:o=>s.openInfoWindow(a),options:{icon:"/recursos/pin30.png"},id:"gmapm"},{default:(0,i.k6)((()=>[n.infoWindowOpened==a?((0,i.uX)(),(0,i.Wv)(u,{key:0,options:n.infoWindow[a].options,closeclick:!0,onCloseclick:e[4]||(e[4]=o=>s.openInfoWindow(null))},{default:(0,i.k6)((()=>[(0,i.Lk)("div",Bo,[(0,i.Lk)("b",jo,(0,c.v_)(o.nombre),1),Oo,(0,i.Lk)("div",Jo,[(0,i.Lk)("a",{style:{"text-decoration":"none",color:"white","font-size":"12px",padding:"4px 6px"},href:"https://nazadoto.com/"+o.usuario,target:"_blank"},Ko,8,Go),o.instagram?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"https://instagram.com/"+o.instagram,target:"blank"},oe,8,Yo)):(0,i.Q3)("",!0),o.facebook?((0,i.uX)(),(0,i.CE)("a",{key:1,href:"https://facebook.com/"+o.facebook,target:"blank"},te,8,ee)):(0,i.Q3)("",!0)]),(0,i.Lk)("p",re,[ie,(0,i.eW)(" "+(0,c.v_)(o.direccion),1)]),(0,i.Lk)("p",ne,[se,(0,i.eW)(" "+(0,c.v_)(o.correo),1)]),(0,i.Lk)("p",ce,[le,(0,i.eW)(" "+(0,c.v_)(o.telefono),1)]),(0,i.Lk)("p",de,' "'+(0,c.v_)(o.descripcion)+'" ',1)])])),_:2},1032,["options"])):(0,i.Q3)("",!0)])),_:2},1032,["position","title","onClick","options"])))),128))])),_:1},8,["center","zoom","options"])],512),[[r.aG,n.mapaMostrado2]]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.negociosAgrupados,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a},[(0,i.Lk)("div",ue,(0,c.v_)(a),1),(0,i.Lk)("div",pe,[(0,i.Lk)("div",me,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a,class:(0,c.C4)({"carrusel-item":!0,active:0===a})},[(0,i.Lk)("div",{class:(0,c.C4)(o.location?"item-container":"item-container-flex")},[(0,i.bF)(l,{class:(0,c.C4)(o.location?"item-texto-block-end":"item-texto-block-end-flex"),to:"/"+o.usuario},{default:(0,i.k6)((()=>[o.imagen?((0,i.uX)(),(0,i.CE)("div",ge,[(0,i.Lk)("img",{class:"imagen-negocio",src:o.imagen,onError:e[5]||(e[5]=(...o)=>s.imagenError&&s.imagenError(...o)),alt:" "},null,40,be)])):((0,i.uX)(),(0,i.CE)("div",he,ke)),(0,i.Lk)("div",fe,(0,c.v_)(o.nombre),1)])),_:2},1032,["class","to"]),null!==o.location?((0,i.uX)(),(0,i.CE)("div",Le,[(0,i.Lk)("a",{class:"cursor-pointer mt-1",onClick:e=>s.localizar(o)},we,8,Ce)])):(0,i.Q3)("",!0)],2)],2)))),128))])])])))),128)),0===s.negociosFiltrados.length?((0,i.uX)(),(0,i.CE)("div",xe," No se encontraron resultados para esa búsqueda. ")):(0,i.Q3)("",!0)])]))])])}var Ee={components:{},name:"MapaComponent",data(){return{usuario:"",buscarMenu:!1,posicionActual:"",options:{disableDefaultUI:!0,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]},infoWindowOpened:null,infoWindow:[],mapCenter:{lat:-27.7876,lng:-64.2596},zoom:14,negocios:[],busqueda:"",rubro:"Todos",mapaMostrado:!1,mapaMostrado2:!1,cargando:!0}},created(){this.fetchNegocios()},mounted(){window.scrollTo({top:0,behavior:"smooth"}),this.$route.params&&Dg.push("/",this.$route.params),this.obtenerUsuario()},computed:{negociosFiltrados(){let o=this.negocios;if("Todos"!==this.rubro&&(o=o.filter((o=>o.rubro===this.rubro))),""!==this.busqueda){const e=this.busqueda.toLowerCase();o=o.filter((o=>{const a=o.nombre?o.nombre.toLowerCase():"",t=o.descripcion?o.descripcion.toLowerCase():"",r=o.rubro?o.rubro.toLowerCase():"";return a.includes(e)||t.includes(e)||r.includes(e)}))}return o},negociosAgrupados(){const o={};this.negociosFiltrados.forEach((e=>{o[e.rubro]||(o[e.rubro]=[]),o[e.rubro].push(e)}));const e=Object.keys(o).sort(),a={};return e.forEach((e=>{a[e]=o[e]})),a},rubrosUnicos(){const o=new Set;return this.negocios.forEach((e=>{o.add(e.rubro)})),Array.from(o)}},methods:{imagenError(o){o.target.src="/recursos/missing.png"},obtenerUsuario(){this.usuario=localStorage.getItem("usuario")},limpiarBusqueda(){this.busqueda="",this.rubro="Todos"},async localizar(o){if(!this.mapaMostrado){this.mapaMostrado=!0,this.mapaMostrado2=!0;try{await this.inicializarMapa()}catch(e){console.error("Error al inicializar el mapa:",e)}}this.buscarMenu=!0,this.mapaMostrado2=!0,this.mapCenter=o.location,this.openInfoWindow(o.index),window.scrollTo({top:0,behavior:"smooth"})},openInfoWindow(o){this.infoWindowOpened==o?this.infoWindowOpened=null:this.infoWindowOpened=o},inicializarMapa(){return new Promise(((o,e)=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const a={lat:e.coords.latitude,lng:e.coords.longitude};this.posicionActual=a,o()}),(o=>{console.log("Error al geolocalizar. Inicializando en Plaza Libertad. ",o),e(o)})):(console.log("No funciona geolocation. Centrando mapa en Plaza Libertad."),o())}catch(a){console.error("Error al obtener la ubicación actual:",a),e(a)}}))},mostrarBusqueda(){this.buscarMenu?this.buscarMenu=!1:this.buscarMenu=!0},async mostrarMapa(){if(this.mapaMostrado2)this.mapaMostrado2=!1;else if(this.mapaMostrado)this.mapaMostrado2=!0;else{this.mapaMostrado=!0,this.mapaMostrado2=!0;try{await this.inicializarMapa(),this.mapCenter=this.posicionActual}catch(o){console.error("Error al inicializar el mapa:",o)}}},async fetchNegocios(){try{const o=await t.A.get("/negocios");this.negocios=o.data.filter(((o,e)=>(o.index=e,o))),this.infoWindow=Array(this.negocios.length).fill({open:!1,options:{pixelOffset:{width:0,height:-10},maxWidth:320,maxHeight:320}})}catch(o){console.error("Error al obtener los datos de los negocios:",o)}finally{this.cargando=!1}}}};const Se=(0,h.A)(Ee,[["render",Pe],["__scopeId","data-v-76ccaa14"]]);var Me=Se;const Ie=o=>((0,i.Qi)("data-v-ab1d75ee"),o=o(),(0,i.jt)(),o),Ae={key:0,class:"pantalla-carga text-center"},_e=Ie((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Ingresando")],-1))),Te=[_e],Ne={class:"total"},qe={class:"fondo text-center"},Fe=Ie((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"100",alt:"logo",class:"mb-4"},null,-1))),Xe=Ie((()=>(0,i.Lk)("h1",{class:"titulo"},"Puestito Online",-1))),Ue={class:"width-size"},Re=Ie((()=>(0,i.Lk)("label",{for:"usuario"},"Usuario",-1))),Ve={class:"width-size"},ze=Ie((()=>(0,i.Lk)("label",{for:"contraseña"},"Contraseña",-1))),Qe=Ie((()=>(0,i.Lk)("div",{class:"col-md-8"},[(0,i.Lk)("button",{type:"submit",class:"btn btn-entrar"},"Entrar")],-1)));function De(o,e,a,t,n,s){const c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[n.ingresando?((0,i.uX)(),(0,i.CE)("div",Ae,Te)):(0,i.Q3)("",!0),(0,i.Lk)("div",Ne,[(0,i.Lk)("div",qe,[Fe,Xe,(0,i.Lk)("form",{class:"row",onSubmit:e[3]||(e[3]=(0,r.D$)(((...o)=>s.login&&s.login(...o)),["prevent"]))},[(0,i.Lk)("div",Ue,[Re,(0,i.bo)((0,i.Lk)("input",{class:"form-control mb-3",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.usuario=o),required:"",onInput:e[1]||(e[1]=(...o)=>s.restrictInput&&s.restrictInput(...o))},null,544),[[r.Jo,n.usuario]])]),(0,i.Lk)("div",Ve,[ze,(0,i.bo)((0,i.Lk)("input",{class:"form-control mb-4",type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>n.contraseña=o),required:""},null,512),[[r.Jo,n.contraseña]])]),Qe,(0,i.bF)(c,{class:"mt-4",to:"/u/planes"},{default:(0,i.k6)((()=>[(0,i.eW)("¡Quiero mi Puestito!")])),_:1}),(0,i.bF)(c,{class:"mt-4 div-ver btn-ver",to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver a Puestito Online")])),_:1})],32)])])])}var We={components:{},data(){return{ingresando:!1,usuario:"","contraseña":""}},methods:{restrictInput(o){const e=o.target.value,a=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;a.test(e)&&(this.usuario=this.usuario.substring(0,this.usuario.length-1))},checkAuthentication(){const o=!!localStorage.getItem("token");o&&this.$router.push("/u/home")},async login(){try{this.ingresando=!0;const o=await t.A.post("/login",{usuario:this.usuario,"contraseña":this.contraseña});if(200===o.status){await t.A.post("/comprobar-vencimiento",{usuario:o.data.nomUsuario}),localStorage.setItem("token",o.data.token),localStorage.setItem("nombre",o.data.nombre),localStorage.setItem("usuario",o.data.nomUsuario),this.$router.push("/u/home");const e=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});e.fire({icon:"success",title:"Inicio de sesión exitoso."})}}catch(o){Lo().fire({icon:"error",text:"Usuario/contraseña incorrectos."})}finally{this.ingresando=!1}}},mounted(){this.checkAuthentication(),window.scrollTo({top:0,behavior:"smooth"})}};const $e=(0,h.A)(We,[["render",De],["__scopeId","data-v-ab1d75ee"]]);var Be=$e;const je=o=>((0,i.Qi)("data-v-574b1806"),o=o(),(0,i.jt)(),o),Oe={key:2,class:"pantalla-carga text-center"},Je=je((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Procesando pago...")],-1))),Ge=[Je],He={key:3,class:"pantalla-carga text-center"},Ke=je((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Registrando...")],-1))),Ye=[Ke],Ze={key:4,class:"container mt-4 mb-2"},oa={key:0,class:"row g-3 mt-4 border"},ea={class:"row g-3 border"},aa=je((()=>(0,i.Lk)("h4",{class:"mb-2"},"Información de acceso",-1))),ta=je((()=>(0,i.Lk)("h4",{class:"subtitulo"},"Cómo ingresarás a la plataforma.",-1))),ra={class:"col-md-6"},ia={class:"subtitulo"},na={class:"col-md-6"},sa={class:"subtitulo",style:{color:"gray"}},ca=je((()=>(0,i.Lk)("h4",{class:"mb-2"},"Información del negocio",-1))),la=je((()=>(0,i.Lk)("h4",{class:"subtitulo"}," Más adelante podés modificar esta información. ",-1))),da={class:"col-md-6"},ua={class:"col-md-6"},pa={class:"col-md-6"},ma=(0,i.Fv)('<option value="Elegí tu rubro" disabled data-v-574b1806>Elegí tu rubro</option><option value="Artesanías" data-v-574b1806>Artesanías</option><option value="Bar/Restaurante" data-v-574b1806>Bar/Restaurante</option><option value="Carnicería" data-v-574b1806>Carnicería</option><option value="Consultorio" data-v-574b1806>Consultorio</option><option value="Estética" data-v-574b1806>Estética</option><option value="Farmacia" data-v-574b1806>Farmacia</option><option value="Ferretería" data-v-574b1806>Ferretería</option><option value="Fiambrería" data-v-574b1806>Fiambrería</option><option value="Florería" data-v-574b1806>Florería</option><option value="Heladería" data-v-574b1806>Heladería</option><option value="Indumentaria" data-v-574b1806>Indumentaria</option><option value="Inmobiliaria" data-v-574b1806>Inmobiliaria</option><option value="Juguetería" data-v-574b1806>Juguetería</option><option value="Librería" data-v-574b1806>Librería</option><option value="Limpieza" data-v-574b1806>Limpieza</option><option value="Panadería" data-v-574b1806>Panadería</option><option value="Peluquería" data-v-574b1806>Peluquería</option><option value="Polirubro" data-v-574b1806>Polirubro</option><option value="Pollería" data-v-574b1806>Pollería</option><option value="Repostería" data-v-574b1806>Repostería</option><option value="Rotisería" data-v-574b1806>Rotisería</option><option value="Reparación/mantenimiento" data-v-574b1806>Reparación/mantenimiento</option><option value="Servicios" data-v-574b1806>Servicios</option><option value="Supermercado" data-v-574b1806>Supermercado</option><option value="Tecnología" data-v-574b1806>Tecnología</option><option value="Verdulería" data-v-574b1806>Verdulería</option><option value="Veterinaria/Forrajería" data-v-574b1806>Veterinaria/Forrajería</option>',28),ga=[ma],ba={class:"col-md-6"},ha={class:"col-md-6"},va={class:"col-md-6"},ka={class:"col-md-6"},fa={class:"col-md-6"},La={class:"col-md-6"},Ca=je((()=>(0,i.Lk)("label",{class:"form-label text-center",for:"imagen"},"Logo (JPG/PNG)",-1))),ya={class:"col-md-6"},wa=je((()=>(0,i.Lk)("label",{class:"form-label text-center",for:"portada"},"Portada (JPG/PNG)",-1))),xa=je((()=>(0,i.Lk)("div",{class:"subtitulo"},"Puedes elegir las imágenes más tarde",-1))),Pa=["disabled"],Ea=["disabled"],Sa={key:1,class:"row g-3 mt-4 border"},Ma={class:"modalCategoriaContainer text-center"},Ia={class:"modalCategoria"},Aa={class:"modal-dialog modal-dialog-centered"},_a={class:"modal-content"},Ta={class:"modal-header pl-2"},Na=je((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),qa={class:"modal-body mt-2"},Fa={class:"pantalla-cargas text-center"},Xa=je((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),Ua=[Xa],Ra={ref:"cropperImg",alt:"Croppear"},Va={class:"modal-footer mt-2"},za={class:"modalCategoriaContainer text-center"},Qa={class:"modalCategoria"},Da={class:"modal-dialog modal-dialog-centered"},Wa={class:"modal-content"},$a={class:"modal-header pl-2"},Ba=je((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),ja={class:"modal-body mt-2"},Oa={class:"pantalla-cargas text-center"},Ja=je((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),Ga=[Ja],Ha={ref:"cropperPortada",alt:"Croppear"},Ka={class:"modal-footer mt-2"};function Ya(o,e,a,t,n,s){const l=(0,i.g2)("NavbarAdminComponent"),d=(0,i.g2)("NavbarPublicoComponent");return(0,i.uX)(),(0,i.CE)("div",null,["admin"==n.usuario?((0,i.uX)(),(0,i.Wv)(l,{key:0})):((0,i.uX)(),(0,i.Wv)(d,{key:1})),n.cargandoPago?((0,i.uX)(),(0,i.CE)("div",Oe,Ge)):(0,i.Q3)("",!0),n.cargandoRegistro?((0,i.uX)(),(0,i.CE)("div",He,Ye)):((0,i.uX)(),(0,i.CE)("div",Ze,[n.usuario?((0,i.uX)(),(0,i.CE)("div",Sa,[(0,i.Lk)("button",{class:"btn btn-menu botones m-auto mb-2",type:"submit",onClick:e[15]||(e[15]=(...o)=>s.registrarNegocio&&s.registrarNegocio(...o))}," Ir a Pagar ")])):((0,i.uX)(),(0,i.CE)("div",oa,[(0,i.Lk)("form",{onSubmit:e[14]||(e[14]=(0,r.D$)(((...o)=>s.registrarNegocio&&s.registrarNegocio(...o)),["prevent"])),id:"form-checkout"},[(0,i.Lk)("div",ea,[aa,ta,(0,i.Lk)("div",ra,[(0,i.bo)((0,i.Lk)("input",{class:(0,c.C4)([{"usuario-disponible":!n.usuarioDisponible},"form-control"]),type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>n.negocio.usuario=o),maxlength:"20",onInput:e[1]||(e[1]=(...o)=>s.restrictInput&&s.restrictInput(...o)),onChange:e[2]||(e[2]=(...o)=>s.verificarDisponibilidad&&s.verificarDisponibilidad(...o)),placeholder:"Nombre de Usuario",required:""},null,34),[[r.Jo,n.negocio.usuario]]),(0,i.Lk)("div",ia,"Tu link será nazadoto.com/"+(0,c.v_)(n.negocio.usuario),1)]),(0,i.Lk)("div",na,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"password",id:"password",maxlength:"20","onUpdate:modelValue":e[3]||(e[3]=o=>n.negocio.contraseña=o),placeholder:"Contraseña",required:""},null,512),[[r.Jo,n.negocio.contraseña]]),(0,i.Lk)("div",sa,(0,c.v_)(n.negocio.contraseña),1)]),ca,la,(0,i.Lk)("div",da,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[4]||(e[4]=o=>n.negocio.nombre=o),placeholder:"Nombre del Negocio",required:""},null,512),[[r.Jo,n.negocio.nombre]])]),(0,i.Lk)("div",ua,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":e[5]||(e[5]=o=>n.negocio.descripcion=o),placeholder:"Descripción (opcional)",maxlength:"40"},null,512),[[r.Jo,n.negocio.descripcion]])]),(0,i.Lk)("div",pa,[(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"rubro",id:"rubro","onUpdate:modelValue":e[6]||(e[6]=o=>n.negocio.rubro=o)},ga,512),[[r.u1,n.negocio.rubro]])]),(0,i.Lk)("div",ba,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"email",id:"email","onUpdate:modelValue":e[7]||(e[7]=o=>n.negocio.email=o),placeholder:"Email",required:""},null,512),[[r.Jo,n.negocio.email]])]),(0,i.Lk)("div",ha,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"direccion","onUpdate:modelValue":e[8]||(e[8]=o=>n.negocio.direccion=o),placeholder:"Dirección (por ej. Libertad 20, Santiago del Estero, Argentina)"},null,512),[[r.Jo,n.negocio.direccion]])]),(0,i.Lk)("div",va,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"telefono","onUpdate:modelValue":e[9]||(e[9]=o=>n.negocio.telefono=o),placeholder:"Teléfono"},null,512),[[r.Jo,n.negocio.telefono]])]),(0,i.Lk)("div",ka,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"instagram","onUpdate:modelValue":e[10]||(e[10]=o=>n.negocio.instagram=o),placeholder:"Usuario de Instagram (opcional)"},null,512),[[r.Jo,n.negocio.instagram]])]),(0,i.Lk)("div",fa,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"facebook","onUpdate:modelValue":e[11]||(e[11]=o=>n.negocio.facebook=o),placeholder:"Usuario de Facebook (opcional)"},null,512),[[r.Jo,n.negocio.facebook]])]),(0,i.Lk)("div",La,[Ca,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:e[12]||(e[12]=o=>s.imagenSeleccionada(o))},null,32)]),(0,i.Lk)("div",ya,[wa,(0,i.Lk)("input",{class:"form-control",type:"file",name:"portada",id:"portada",accept:"image/jpeg, image/png",onChange:e[13]||(e[13]=o=>s.portadaSeleccionada(o))},null,32)]),xa,n.plan?((0,i.uX)(),(0,i.CE)("button",{key:1,disabled:!n.usuarioDisponible,class:"btn btn-menu botones m-auto mt-2 mb-2",type:"submit"}," Ir a Pagar ",8,Ea)):((0,i.uX)(),(0,i.CE)("button",{key:0,disabled:!n.usuarioDisponible,class:"btn btn-menu botones m-auto mt-2 mb-2",type:"submit"}," Registrar ",8,Pa))])],32)]))])),(0,i.bo)((0,i.Lk)("div",Ma,[(0,i.Lk)("div",Ia,[(0,i.Lk)("div",Aa,[(0,i.Lk)("div",_a,[(0,i.Lk)("div",Ta,[Na,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[16]||(e[16]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",qa,[(0,i.bo)((0,i.Lk)("div",Fa,Ua,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",Ra,null,512)]),(0,i.Lk)("div",Va,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[17]||(e[17]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[18]||(e[18]=(...o)=>s.guardarImagenRecortada&&s.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]]),(0,i.bo)((0,i.Lk)("div",za,[(0,i.Lk)("div",Qa,[(0,i.Lk)("div",Da,[(0,i.Lk)("div",Wa,[(0,i.Lk)("div",$a,[Ba,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[19]||(e[19]=(...o)=>s.cerrarCropPortada&&s.cerrarCropPortada(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",ja,[(0,i.bo)((0,i.Lk)("div",Oa,Ga,512),[[r.aG,n.cargandoCropperPortada]]),(0,i.Lk)("img",Ha,null,512)]),(0,i.Lk)("div",Ka,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[20]||(e[20]=(...o)=>s.cerrarCropPortada&&s.cerrarCropPortada(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[21]||(e[21]=(...o)=>s.guardarPortadaRecortada&&s.guardarPortadaRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropPortada]])])}const Za=o=>((0,i.Qi)("data-v-f99381a8"),o=o(),(0,i.jt)(),o),ot={class:"navbar navbar-dark bg-dark"},et=Za((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"30",height:"30",class:"d-inline-block align-top",alt:""},null,-1))),at=Za((()=>(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",fill:"currentColor",class:"bi bi-box-arrow-in-right",viewBox:"0 0 16 16"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z"}),(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"})],-1)));function tt(o,e,a,t,r,n){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",ot,[(0,i.bF)(s,{class:"navbar-brand",to:"/"},{default:(0,i.k6)((()=>[et,(0,i.eW)(" Puestito Online ")])),_:1}),r.usuario?((0,i.uX)(),(0,i.Wv)(s,{key:0,to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Mi Negocio")])),_:1})):((0,i.uX)(),(0,i.Wv)(s,{key:1,class:"inline-end c-white",to:"/u/login"},{default:(0,i.k6)((()=>[(0,i.eW)("Ingresar "),at])),_:1}))])}var rt={data(){return{usuario:""}},mounted(){this.obtenerUsuario()},methods:{obtenerUsuario(){this.usuario=localStorage.getItem("usuario")}}};const it=(0,h.A)(rt,[["render",tt],["__scopeId","data-v-f99381a8"]]);var nt=it,st=a(3534),ct={components:{NavbarAdminComponent:ko,NavbarPublicoComponent:nt},data(){return{cargandoRegistro:!1,cargandoCropper:!0,cargandoCropperPortada:!0,modalCropImage:!1,modalCropPortada:!1,cropper:null,cropperPortada:null,imageToCrop:"",usuarioDisponible:!0,cargandoPago:!1,esperandoPago:!0,plan:null,ref:null,usuario:"",negocio:{usuario:"","contraseña":"",nombre:"",fechaVence:"",email:"",imagen:"",portada:"",direccion:"",telefono:"",descripcion:"",instagram:"",facebook:"",rubro:"Elegí tu rubro"}}},mounted(){this.obtenerPlan(),window.scrollTo({top:0,behavior:"smooth"})},methods:{restrictInput(o){const e=o.target.value,a=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;a.test(e)&&(this.negocio.usuario=this.negocio.usuario.substring(0,this.negocio.usuario.length-1))},obtenerPlan(){const o=!!localStorage.getItem("token");this.plan=localStorage.getItem("plan"),console.log(this.plan),o&&(this.plan?(this.usuario=localStorage.getItem("usuario"),this.registrarNegocio()):this.$router.push("/u/home"))},portadaSeleccionada(o){try{const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropPortada=!0,window.scrollTo({top:0,behavior:"smooth"});let e=this.$refs.cropperPortada;e.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropperPortada=new st.Ay(e,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='0.75'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoCropperPortada=!1}},async guardarPortadaRecortada(){try{const o=await this.cropperPortada.getCropperSelection().$toCanvas({width:1e3,height:1333});this.negocio.portada=o.toDataURL("image/jpeg",.9)}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropPortada=!1}},imagenSeleccionada(o){try{const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0,window.scrollTo({top:0,behavior:"smooth"});let e=this.$refs.cropperImg;e.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new st.Ay(e,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoCropper=!1}},cerrarCrop(){this.modalCropImage=!1},cerrarCropPortada(){this.modalCropPortada=!1},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.negocio.imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}},async verificarDisponibilidad(){try{const o=await t.A.post("/verificar-usuario",{usuario:this.negocio.usuario});this.usuarioDisponible=o.data,this.usuarioDisponible||Lo().fire({icon:"error",text:"Ese usuario ya existe. Por favor elegí otro."})}catch(o){console.error(o)}},verificarRubro(){return"Elegí tu rubro"!=this.negocio.rubro||(Lo().fire({icon:"error",text:"Por favor selecciona un rubro."}),!1)},async registrarNegocio(){this.cargandoRegistro=!0,this.plan?(this.cargandoPago=!0,this.usuario?this.mejorarPlan():this.verificarRubro()&&(this.verificarDisponibilidad(),this.usuarioDisponible&&(this.usuario=this.negocio.usuario,this.contratarPlan()))):this.verificarRubro()&&(this.verificarDisponibilidad(),this.usuarioDisponible&&(this.usuario=this.negocio.usuario,this.registrarGratis()))},async verificarPago(){let o;while(this.esperandoPago){await new Promise((o=>setTimeout(o,5e3)));const e=await t.A.post("/facturar/verificarPago",{ref:this.ref});if(o=e.data,"approved"===o)break}return o},async mejorarPlan(){const o=await t.A.post("/facturar/crearOrden",{plan:this.plan,usuario:this.usuario});try{const e=window.open("","_blank"),a=await o.data.response.init_point;if(!e)throw new Error("No se pudo abrir la ventana emergente.");e.location.href=a,this.ref=JSON.parse(o.data.response.external_reference);const t=await this.verificarPago();"approved"===t?(this.registrarMejora(),this.cargandoPago=!1):(this.cargandoPago=!1,Lo().fire({icon:"error",text:"No se pudo verificar el pago."}))}catch(e){this.cargandoPago=!1,Lo().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a MercadoPago."+(e.response?.data?.message||e.message)})}},async contratarPlan(){try{const e=await t.A.post("/facturar/crearOrden",{plan:this.plan,usuario:this.usuario});try{let o=new Date;const a=o.getMonth();o.setMonth(Number(a)+Number(this.plan)),this.negocio.fechaVence=o.toISOString().slice(0,19).replace("T"," ");const t=window.open("","_blank"),r=await e.data.response.init_point;if(!t)throw new Error("No se pudo abrir la ventana emergente.");t.location.href=r,this.ref=JSON.parse(e.data.response.external_reference);const i=await this.verificarPago();"approved"===i?(this.registrar(),this.cargandoPago=!1):(this.cargandoPago=!1,Lo().fire({icon:"error",text:"No se pudo verificar el pago."}))}catch(o){Lo().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a MercadoPago."+o.response.data.message})}}catch(o){console.log(o)}},async registrarMejora(){let o=new Date;const e=o.getMonth();o.setMonth(Number(e)+Number(this.plan));const a=o.getFullYear();o=o.toISOString().slice(0,19).replace("T"," ");try{t.A.put("/facturar/acreditar",{usuario:this.usuario,fecha:o}),this.cargandoPago=!1,localStorage.setItem("año",a),Dg.push("/");const e=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});e.fire({icon:"success",title:"Pago exitoso."})}catch(r){console.log(r)}},async registrarGratis(){let o=new Date;o.setMonth(o.getMonth()+1),this.negocio.fechaVence=o.toISOString().slice(0,19).replace("T"," "),this.registrar()},async registrar(){await t.A.post("/register",this.negocio).then((()=>{Dg.push("/");const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Registro exitoso."})})).catch((o=>{Lo().fire({icon:"error",text:o.response.data.message}),console.error("Error al registrar usuario:",o)})).finally((()=>{this.cargandoRegistro=!1}))}}};const lt=(0,h.A)(ct,[["render",Ya],["__scopeId","data-v-574b1806"]]);var dt=lt;const ut=o=>((0,i.Qi)("data-v-2d9d7786"),o=o(),(0,i.jt)(),o),pt={key:0,class:"pantalla-carga text-center"},mt=ut((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando negocios ")],-1))),gt=[mt],bt={class:"container mt-4 mb-2"},ht=ut((()=>(0,i.Lk)("h1",null,"Negocios",-1))),vt={class:"izquierda ancho-busqueda"},kt={key:0},ft=["src"],Lt={class:"item-texto-block m-2"},Ct={key:0,class:"item-descripcion"},yt=ut((()=>(0,i.Lk)("b",null,"Nombre de usuario:",-1))),wt={class:"item-descripcion"},xt=ut((()=>(0,i.Lk)("b",null,"Nombre del negocio:",-1))),Pt={key:1,class:"item-descripcion"},Et=ut((()=>(0,i.Lk)("b",null,"Descripción:",-1))),St={key:2,class:"item-descripcion"},Mt=ut((()=>(0,i.Lk)("b",null,"Fecha de Vencimiento:",-1))),It=["onClick"],At=["onClick"],_t={class:"item-texto-block-end"},Tt=["href"],Nt=ut((()=>(0,i.Lk)("img",{width:"40",src:"/recursos/instagram.png"},null,-1))),qt=[Nt],Ft={key:1},Xt=["href"],Ut=ut((()=>(0,i.Lk)("img",{width:"36",src:"/recursos/facebook.png"},null,-1))),Rt=[Ut],Vt={key:3},zt={class:"item-btn"},Qt=ut((()=>(0,i.Lk)("img",{src:"/favicon.ico",width:"30",alt:""},null,-1))),Dt={class:"modal fade",id:"modificarProducto",tabindex:"-1","aria-labelledby":"modificarProductoLabel","aria-hidden":"true",ref:"modalModificar"},Wt={class:"modal-dialog modal-dialog-centered"},$t={class:"modal-content"},Bt=ut((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"modificarProductoLabel"},"Modificar Datos"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),jt={class:"modal-body"},Ot={class:"row g-3 div-forms border"},Jt=ut((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Usuario",-1))),Gt=ut((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Negocio",-1))),Ht=ut((()=>(0,i.Lk)("label",{class:"form-label",for:"rubro"},"Rubro",-1))),Kt=(0,i.Fv)('<option value="Elegí tu rubro" selected disabled data-v-2d9d7786>Elegí tu rubro</option><option value="Artesanías" data-v-2d9d7786>Artesanías</option><option value="Bar/Restaurante" data-v-2d9d7786>Bar/Restaurante</option><option value="Carnicería" data-v-2d9d7786>Carnicería</option><option value="Consultorio" data-v-2d9d7786>Consultorio</option><option value="Estética" data-v-2d9d7786>Estética</option><option value="Farmacia" data-v-2d9d7786>Farmacia</option><option value="Ferretería" data-v-2d9d7786>Ferretería</option><option value="Fiambrería" data-v-2d9d7786>Fiambrería</option><option value="Florería" data-v-2d9d7786>Florería</option><option value="Heladería" data-v-2d9d7786>Heladería</option><option value="Indumentaria" data-v-2d9d7786>Indumentaria</option><option value="Inmobiliaria" data-v-2d9d7786>Inmobiliaria</option><option value="Juguetería" data-v-2d9d7786>Juguetería</option><option value="Librería" data-v-2d9d7786>Librería</option><option value="Limpieza" data-v-2d9d7786>Limpieza</option><option value="Panadería" data-v-2d9d7786>Panadería</option><option value="Peluquería" data-v-2d9d7786>Peluquería</option><option value="Polirubro" data-v-2d9d7786>Polirubro</option><option value="Pollería" data-v-2d9d7786>Pollería</option><option value="Repostería" data-v-2d9d7786>Repostería</option><option value="Rotisería" data-v-2d9d7786>Rotisería</option><option value="Reparación/mantenimiento" data-v-2d9d7786>Reparación/mantenimiento </option><option value="Servicios" data-v-2d9d7786>Servicios</option><option value="Supermercado" data-v-2d9d7786>Supermercado</option><option value="Tecnología" data-v-2d9d7786>Tecnología</option><option value="Verdulería" data-v-2d9d7786>Verdulería</option><option value="Veterinaria/Forrajería" data-v-2d9d7786>Veterinaria/Forrajería</option>',28),Yt=[Kt],Zt=ut((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Imagen (JPG/PNG)",-1))),or=ut((()=>(0,i.Lk)("div",{class:"text-end"},[(0,i.Lk)("button",{class:"btn btn-menu botones mt-3",type:"submit","aria-label":"Close"},"Modificar")],-1)));function er(o,e,a,t,n,s){const l=(0,i.g2)("NavbarAdminComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),n.cargando?((0,i.uX)(),(0,i.CE)("div",pt,gt)):(0,i.Q3)("",!0),(0,i.Lk)("div",bt,[ht,(0,i.Lk)("div",vt,[(0,i.bo)((0,i.Lk)("input",{class:"form-control barra-busqueda","onUpdate:modelValue":e[0]||(e[0]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]])]),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.negociosFiltrados,((o,e)=>((0,i.uX)(),(0,i.CE)("li",{class:"item-container mt-2",key:e},[o.imagen?((0,i.uX)(),(0,i.CE)("div",kt,[(0,i.Lk)("img",{class:"imagen",src:o.imagen,alt:" "},null,8,ft)])):(0,i.Q3)("",!0),(0,i.Lk)("div",Lt,[o.usuario?((0,i.uX)(),(0,i.CE)("div",Ct,[yt,(0,i.eW)(' "'+(0,c.v_)(o.usuario)+'" ',1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",wt,[xt,(0,i.eW)(" "+(0,c.v_)(o.nombre),1)]),o.descripcion?((0,i.uX)(),(0,i.CE)("div",Pt,[Et,(0,i.eW)(' "'+(0,c.v_)(o.descripcion)+'" ',1)])):(0,i.Q3)("",!0),o.fechaVence?((0,i.uX)(),(0,i.CE)("div",St,[Mt,(0,i.eW)(' "'+(0,c.v_)(s.formatear(o.fechaVence))+'" ',1)])):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"btn btn-menu derecha mt-2 mb-2",title:"Modificar","data-bs-toggle":"modal","data-bs-target":"#modificarProducto",onClick:e=>s.modificarNegocio(o)},"Modificar",8,It),(0,i.Lk)("button",{class:"btn btn-menu-danger derecha m-2",onClick:e=>s.eliminarNegocio(o.usuario)},"Eliminar",8,At)]),(0,i.Lk)("div",_t,[o.instagram?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"m-2",href:"https://instagram.com/"+o.instagram,target:"blank"},qt,8,Tt)):((0,i.uX)(),(0,i.CE)("div",Ft,"Sin Instagram")),o.facebook?((0,i.uX)(),(0,i.CE)("a",{key:2,class:"m-2",href:"https://facebook.com/"+o.facebook,target:"blank"},Rt,8,Xt)):((0,i.uX)(),(0,i.CE)("div",Vt,"Sin Facebook"))]),(0,i.Lk)("div",zt,[(0,i.bF)(d,{class:"item-texto-block-end",to:"/"+o.usuario},{default:(0,i.k6)((()=>[Qt])),_:2},1032,["to"])])])))),128))])]),(0,i.Lk)("div",Dt,[(0,i.Lk)("div",Wt,[(0,i.Lk)("div",$t,[Bt,(0,i.Lk)("div",jt,[(0,i.Lk)("form",{onSubmit:e[13]||(e[13]=(0,r.D$)((o=>s.modificarPerfil(n.negocioModificar)),["prevent"]))},[(0,i.Lk)("div",Ot,[Jt,(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[1]||(e[1]=o=>n.negocioModificar.usuario=o),placeholder:"Nombre de Usuario",disabled:""},null,512),[[r.Jo,n.negocioModificar.usuario]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"password",id:"nombre","onUpdate:modelValue":e[2]||(e[2]=o=>n.negocioModificar.contraseña=o),placeholder:"Contraseña"},null,512),[[r.Jo,n.negocioModificar.contraseña]])]),Gt,(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[3]||(e[3]=o=>n.negocioModificar.nombre=o),placeholder:"Nombre del Negocio",required:""},null,512),[[r.Jo,n.negocioModificar.nombre]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"email",id:"correo","onUpdate:modelValue":e[4]||(e[4]=o=>n.negocioModificar.correo=o),placeholder:"Correo"},null,512),[[r.Jo,n.negocioModificar.correo]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"telefono","onUpdate:modelValue":e[5]||(e[5]=o=>n.negocioModificar.telefono=o),placeholder:"Teléfono"},null,512),[[r.Jo,n.negocioModificar.telefono]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"direccion","onUpdate:modelValue":e[6]||(e[6]=o=>n.negocioModificar.direccion=o),placeholder:"Dirección",required:""},null,512),[[r.Jo,n.negocioModificar.direccion]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":e[7]||(e[7]=o=>n.negocioModificar.descripcion=o),placeholder:"Descripción"},null,512),[[r.Jo,n.negocioModificar.descripcion]])]),(0,i.Lk)("div",null,[Ht,(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"rubro",id:"rubro","onUpdate:modelValue":e[8]||(e[8]=o=>n.negocioModificar.rubro=o)},Yt,512),[[r.u1,n.negocioModificar.rubro]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"date",id:"fechaVence","onUpdate:modelValue":e[9]||(e[9]=o=>n.negocioModificar.fechaVence=o),placeholder:"Fecha de Vencimiento"},null,512),[[r.Jo,n.negocioModificar.fechaVence]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"instagram","onUpdate:modelValue":e[10]||(e[10]=o=>n.negocioModificar.instagram=o),placeholder:"Instagram"},null,512),[[r.Jo,n.negocioModificar.instagram]])]),(0,i.Lk)("div",null,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"facebook","onUpdate:modelValue":e[11]||(e[11]=o=>n.negocioModificar.facebook=o),placeholder:"Facebook"},null,512),[[r.Jo,n.negocioModificar.facebook]])]),(0,i.Lk)("div",null,[Zt,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:e[12]||(e[12]=(...e)=>o.imagenSeleccionada&&o.imagenSeleccionada(...e))},null,32)])]),or],32)])])])],512)])}var ar=a(5768),tr={components:{NavbarAdminComponent:ko},data(){return{cargando:!0,negocios:[],busqueda:"",negocioModificar:{usuario:"","contraseña":"",nombre:"",descripcion:"",correo:"",direccion:"",rubro:"",telefono:"",instagram:"",facebook:"",imagen:"",portada:"",fechaVence:""}}},mounted(){this.fetchNegocios()},methods:{eliminarNegocio(o){Lo().fire({icon:"info",title:"<strong>¿Estas segur@?</strong>",html:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonText:"No, cancelar",confirmButtonText:"Sí, eliminar!"}).then((e=>{e.isConfirmed&&t.A.delete("/eliminarNegocio",{data:{usuario:o}}).then((()=>{const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Negocio eliminado."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{console.log("error"),console.error("Error al eliminar:",o)}))}))},modificarPerfil(o){o.fechaVence=new Date(o.fechaVence).toISOString().slice(0,19).replace("T"," "),t.A.put("/modificarPerfilAdmin",{negocio:o}).then((()=>{const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Datos modificados."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{console.log("error"),console.error("Error al actualizar la información en la base de datos:",o)}))},modificarNegocio(o){this.negocioModificar.usuario=o.usuario,this.negocioModificar.contraseña=o.contraseña,this.negocioModificar.nombre=o.nombre,this.negocioModificar.descripcion=o.descripcion,this.negocioModificar.correo=o.correo,this.negocioModificar.direccion=o.direccion,this.negocioModificar.telefono=o.telefono,this.negocioModificar.instagram=o.instagram,this.negocioModificar.facebook=o.facebook,this.negocioModificar.rubro=o.rubro,this.negocioModificar.imagen=o.imagen,this.negocioModificar.fechaVence=(0,ar.GP)(new Date(o.fechaVence),"yyyy-MM-dd"),console.log(this.negocioModificar)},formatear(o){return(0,ar.GP)(new Date(o),"dd/MM/yyyy")},async fetchNegocios(){try{const o=await t.A.get("/listarNegocios");this.negocios=o.data}catch(o){console.error("Error al obtener los datos de los negocios:",o)}finally{this.cargando=!1,console.log(this.negocios)}}},computed:{negociosFiltrados(){return this.negocios.filter((o=>{const e=o.nombre||"",a=o.descripcion||"";return e.toLowerCase().includes(this.busqueda.toLowerCase())||a.toLowerCase().includes(this.busqueda.toLowerCase())}))}}};const rr=(0,h.A)(tr,[["render",er],["__scopeId","data-v-2d9d7786"]]);var ir=rr;const nr=o=>((0,i.Qi)("data-v-1745758e"),o=o(),(0,i.jt)(),o),sr={class:"container pt-4 mb-2"},cr=nr((()=>(0,i.Lk)("h1",{class:"text-center"},"Cargar Producto",-1))),lr={class:"row g-3 div-forms mt-2"},dr={class:"flex"},ur=nr((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2"},"Información del Producto",-1))),pr=nr((()=>(0,i.Lk)("img",{src:"/recursos/undo.png",width:"40",alt:""},null,-1))),mr={class:"col-md-6"},gr={class:"col-md-12 mt-3"},br={class:"col-md-6"},hr=nr((()=>(0,i.Lk)("option",{selected:"",disabled:""},"Categoría",-1))),vr=["value"],kr={class:"col-md-6 izq"},fr={class:"col-md-6 text-center"},Lr=nr((()=>(0,i.Lk)("i",{class:"small"},'Si el precio es menor a 0, se publicará como "consultar precio"',-1))),Cr={class:"col-md-6"},yr={class:"col-md-6"},wr=nr((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Imagen (JPG/PNG)",-1))),xr=["disabled"],Pr={class:"modalCategoriaContainer text-center"},Er={class:"modalCategoria"},Sr={class:"modal-dialog modal-dialog-centered"},Mr={class:"modal-content"},Ir={class:"modal-header pl-2"},Ar=nr((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),_r={class:"modal-body mt-2"},Tr={class:"pantalla-cargas text-center"},Nr=nr((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),qr=[Nr],Fr={ref:"cropperImg",alt:"Croppear"},Xr={class:"modal-footer mt-2"},Ur={key:0,class:"modalCategoriaContainer"},Rr={class:"modalCategoria"},Vr={class:"modal-dialog modal-dialog-centered"},zr={class:"modal-content"},Qr={class:"modal-header pl-2"},Dr=nr((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Nueva Categoría",-1))),Wr={class:"modal-body mt-2"},$r={class:"modal-footer mt-2"},Br=["disabled"],jr={class:"modal fade",id:"importar",tabindex:"-1","aria-labelledby":"importarLabel","aria-hidden":"true"},Or={class:"modal-dialog modal-dialog-centered"},Jr={class:"modal-content"},Gr=nr((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"importarLabel"},"Importar desde Excel"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Hr={class:"modal-body text-center"},Kr=nr((()=>(0,i.Lk)("p",{class:"text-center"},[(0,i.eW)("Asegurate de que en tu planilla de Excel existan las columnas con encabezados "),(0,i.Lk)("strong",null,'"Producto"'),(0,i.eW)(", en donde se encontrará el nombre del producto, y "),(0,i.Lk)("strong",null,'"Precio"'),(0,i.eW)(", en donde se encontrará el precio del producto. "),(0,i.Lk)("u",null,"(Se ignorará el resto de columnas)"),(0,i.eW)(". Más adelante podrás modificar la información de los mismos en la pestaña "),(0,i.Lk)("strong",null,'"Listar Productos"'),(0,i.eW)(". ")],-1))),Yr=nr((()=>(0,i.Lk)("img",{class:"m-auto",src:"/recursos/ejemplo-xlsx.png",width:"100%",alt:""},null,-1))),Zr=nr((()=>(0,i.Lk)("div",{class:"modal-footer"},[(0,i.Lk)("button",{type:"button",class:"btn","data-bs-dismiss":"modal"},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",type:"submit"},"Importar")],-1))),oi=nr((()=>(0,i.Lk)("div",{class:"text-end margen-bot"},[(0,i.Lk)("i",null," o importar listado desde Excel ->"),(0,i.Lk)("button",{type:"button",class:"btn btn-importar","data-bs-toggle":"modal","data-bs-target":"#importar"},[(0,i.Lk)("img",{src:"/recursos/xlsx.png",width:"50",alt:"",title:"Importar desde Excel"})])],-1)));function ei(o,e,a,t,n,s){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",sr,[cr,(0,i.Lk)("form",{onSubmit:e[7]||(e[7]=(0,r.D$)((o=>s.nuevoProducto(this.producto)),["prevent"])),enctype:"multipart/form-data"},[(0,i.Lk)("div",lr,[(0,i.Lk)("div",dr,[ur,(0,i.bF)(d,{class:"btn-back",to:"/u/productos"},{default:(0,i.k6)((()=>[pr])),_:1})]),(0,i.Lk)("div",mr,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[0]||(e[0]=o=>n.producto.nombre=o),placeholder:"Nombre del Producto",required:""},null,512),[[r.Jo,n.producto.nombre]])]),(0,i.Lk)("div",gr,[(0,i.bo)((0,i.Lk)("textarea",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":e[1]||(e[1]=o=>n.producto.descripcion=o),placeholder:"Descripción"},null,512),[[r.Jo,n.producto.descripcion]])]),(0,i.Lk)("div",br,[(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=o=>n.producto.categoria=o),id:"",required:""},[hr,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.categorias,(o=>((0,i.uX)(),(0,i.CE)("option",{key:o.id,value:o.categoria_nombre},(0,c.v_)(o.categoria_nombre),9,vr)))),128))],512),[[r.u1,n.producto.categoria]])]),(0,i.Lk)("div",kr,[(0,i.Lk)("button",{type:"button",class:"btn btn-agregar",onClick:e[3]||(e[3]=(...o)=>s.agregarCategoriaModal&&s.agregarCategoriaModal(...o))}," Agregar Categoría ")]),(0,i.Lk)("div",fr,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"precio","onUpdate:modelValue":e[4]||(e[4]=o=>n.producto.precio=o),placeholder:"Precio",required:""},null,512),[[r.Jo,n.producto.precio]]),Lr]),(0,i.Lk)("div",Cr,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"stock","onUpdate:modelValue":e[5]||(e[5]=o=>n.producto.stock=o),placeholder:"Stock (opcional)"},null,512),[[r.Jo,n.producto.stock]])]),(0,i.Lk)("div",yr,[wr,(0,i.Lk)("input",{class:"form-control mb-3",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:e[6]||(e[6]=o=>s.imagenSeleccionada(o))},null,32)])]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-menu botones mt-3",disabled:!n.botonAgregarProductoEnabled,type:"submit"},"Agregar",8,xr)])],32),(0,i.bo)((0,i.Lk)("div",Pr,[(0,i.Lk)("div",Er,[(0,i.Lk)("div",Sr,[(0,i.Lk)("div",Mr,[(0,i.Lk)("div",Ir,[Ar,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[8]||(e[8]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",_r,[(0,i.bo)((0,i.Lk)("div",Tr,qr,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",Fr,null,512)]),(0,i.Lk)("div",Xr,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[9]||(e[9]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[10]||(e[10]=(...o)=>s.guardarImagenRecortada&&s.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]]),n.agregarCategoriaModalAbierto?((0,i.uX)(),(0,i.CE)("div",Ur,[(0,i.Lk)("div",Rr,[(0,i.Lk)("div",Vr,[(0,i.Lk)("div",zr,[(0,i.Lk)("div",Qr,[Dr,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[11]||(e[11]=(...o)=>s.cerrarCategoriaModal&&s.cerrarCategoriaModal(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Wr,[(0,i.Lk)("form",{onSubmit:e[14]||(e[14]=(0,r.D$)(((...o)=>s.agregarCategoria&&s.agregarCategoria(...o)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[12]||(e[12]=o=>n.categoria_nombre=o),placeholder:"Nombre de la Categoría",required:""},null,512),[[r.Jo,n.categoria_nombre]]),(0,i.Lk)("div",$r,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[13]||(e[13]=(...o)=>s.cerrarCategoriaModal&&s.cerrarCategoriaModal(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-agregar",type:"submit",disabled:!n.botonAgregarCategoriaEnabled},"Agregar",8,Br)])],32)])])])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",jr,[(0,i.Lk)("div",Or,[(0,i.Lk)("div",Jr,[Gr,(0,i.Lk)("form",{onSubmit:e[16]||(e[16]=(0,r.D$)(((...o)=>s.importar&&s.importar(...o)),["prevent"]))},[(0,i.Lk)("div",Hr,[Kr,Yr,(0,i.Lk)("input",{class:"form-control mt-4",accept:".xlsx, .xls",type:"file",name:"importar",id:"importar",onChange:e[15]||(e[15]=(...o)=>s.cargarImportacion&&s.cargarImportacion(...o)),required:""},null,32)]),Zr],32)])])])]),oi])}a(6573),a(8100),a(7936),a(7467),a(4732),a(9577);const ai=o=>((0,i.Qi)("data-v-290aa3f8"),o=o(),(0,i.jt)(),o),ti={class:""},ri={class:"nav-mobile-bg"},ii={class:"flex-mobile"},ni=ai((()=>(0,i.Lk)("img",{src:"/recursos/home.png",width:"50",height:"50",alt:"Home"},null,-1))),si=ai((()=>(0,i.Lk)("img",{src:"/recursos/productos.png",width:"50",alt:"Add"},null,-1))),ci=ai((()=>(0,i.Lk)("img",{src:"/recursos/image.png",width:"50",alt:"Add"},null,-1))),li=ai((()=>(0,i.Lk)("img",{src:"/recursos/user.png",width:"50",height:"50",alt:"User"},null,-1))),di=ai((()=>(0,i.Lk)("img",{src:"/recursos/mipuestito.png",width:"50",height:"50",alt:"User"},null,-1))),ui={class:"navbar navbar-expand-lg navbar-dark bg-dark"},pi={class:"container-fluid"},mi=ai((()=>(0,i.Lk)("img",{class:"m-2",src:"/recursos/home.png",width:"25",alt:""},null,-1))),gi=ai((()=>(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDarkDropdown","aria-controls":"navbarNavDarkDropdown","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1))),bi={class:"collapse navbar-collapse",id:"navbarNavDarkDropdown"},hi={class:"navbar-nav"},vi={class:"test nav-item"},ki={class:"test nav-item"},fi={class:"test nav-item"},Li={class:"test nav-item"},Ci={class:"test nav-item"},yi={class:"test nav-item"},wi={class:"test nav-item"},xi=ai((()=>(0,i.Lk)("button",{class:"nav-link","data-bs-toggle":"modal","data-bs-target":"#cerrarSesionModal"}," Salir ",-1))),Pi={class:"modal fade",id:"cerrarSesionModal",tabindex:"-1","aria-labelledby":"cerrarSesionModalLabel","aria-hidden":"true"},Ei={class:"modal-dialog"},Si={class:"modal-content"},Mi=ai((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"cerrarSesionModalLabel"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ii={class:"modal-footer text-center"},Ai=ai((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function _i(o,e,a,t,r,n){const s=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",ti,[(0,i.Lk)("div",ri,[(0,i.Lk)("div",ii,[(0,i.bF)(s,{to:"/u/home",class:"item-mobile"},{default:(0,i.k6)((()=>[ni])),_:1}),(0,i.bF)(s,{to:"/u/productos",class:"item-mobile"},{default:(0,i.k6)((()=>[si])),_:1}),(0,i.bF)(s,{to:"/u/publicaciones",class:"item-mobile"},{default:(0,i.k6)((()=>[ci])),_:1}),(0,i.bF)(s,{to:"/u/modificar",class:"item-mobile"},{default:(0,i.k6)((()=>[li])),_:1}),(0,i.bF)(s,{to:"/"+n.leerUsuario(),class:"item-mobile"},{default:(0,i.k6)((()=>[di])),_:1},8,["to"])])]),(0,i.Lk)("nav",ui,[(0,i.Lk)("div",pi,[(0,i.bF)(s,{class:"navbar-brand",to:"/u/home"},{default:(0,i.k6)((()=>[mi,(0,i.eW)(" "+(0,c.v_)(n.leerNombre()),1)])),_:1}),gi,(0,i.Lk)("div",bi,[(0,i.Lk)("ul",hi,[(0,i.Lk)("li",vi,[(0,i.bF)(s,{class:"nav-link",to:"/u/home"},{default:(0,i.k6)((()=>[(0,i.eW)("Inicio ")])),_:1})]),(0,i.Lk)("li",ki,[(0,i.bF)(s,{class:"nav-link",to:"/u/productos"},{default:(0,i.k6)((()=>[(0,i.eW)("Productos")])),_:1})]),(0,i.Lk)("li",fi,[(0,i.bF)(s,{class:"nav-link",to:"/u/publicaciones"},{default:(0,i.k6)((()=>[(0,i.eW)("Publicaciones")])),_:1})]),(0,i.Lk)("li",Li,[(0,i.bF)(s,{class:"nav-link",to:"/u/crearqr"},{default:(0,i.k6)((()=>[(0,i.eW)("Crear QR")])),_:1})]),(0,i.Lk)("li",Ci,[(0,i.bF)(s,{class:"nav-link",to:"/u/modificar"},{default:(0,i.k6)((()=>[(0,i.eW)("Pefil")])),_:1})]),(0,i.Lk)("li",yi,[(0,i.bF)(s,{to:"/"+n.leerUsuario(),class:"nav-link"},{default:(0,i.k6)((()=>[(0,i.eW)("Mi Puestito ")])),_:1},8,["to"])]),(0,i.Lk)("li",wi,[xi,(0,i.Lk)("div",Pi,[(0,i.Lk)("div",Ei,[(0,i.Lk)("div",Si,[Mi,(0,i.Lk)("div",Ii,[Ai,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...o)=>n.cerrarSesion&&n.cerrarSesion(...o))},"Sí, cerrar sesión")])])])])])])])])])])}var Ti={mounted(){},methods:{isActiveProductos(){return"/u/nuevoProducto"==this.$route.path||"/u/productos"==this.$route.path},isActiveCategorias(){return"/u/nuevaCategoria"==this.$route.path||"/u/categorias"==this.$route.path},leerNombre(){return localStorage.getItem("nombre")},leerUsuario(){return localStorage.getItem("usuario")},cerrarSesion(){localStorage.clear(),Dg.push("/")}},components:{"router-link":y.Wk}};const Ni=(0,h.A)(Ti,[["render",_i],["__scopeId","data-v-290aa3f8"]]);var qi=Ni,Fi=a(3230),Xi={components:{NavbarComponent:qi},data(){return{cargandoCropper:!0,cropper:null,imageToCrop:"",modalCropImage:!1,botonAgregarProductoEnabled:!0,botonAgregarCategoriaEnabled:!0,agregarCategoriaModalAbierto:!1,archivo:null,usuario:"",producto:{nombre:"",descripcion:"",categoria:"Categoría",precio:"",imagen:"",stock:"",usuario:""},categoria_nombre:"",categorias:[]}},created(){this.obtenerCategorias(),this.obtenerUsuario()},methods:{cerrarCategoriaModal(){this.agregarCategoriaModalAbierto=!1},agregarCategoriaModal(){window.scrollTo({top:0,behavior:"smooth"}),this.agregarCategoriaModalAbierto=!0},cargarImportacion(o){this.archivo=o.target.files[0]},async importar(){if(!this.archivo)return void console.error("No se ha seleccionado ningún archivo");const o=new FileReader;o.onload=async o=>{try{const e=new Uint8Array(o.target.result),a=Fi.LF(e,{type:"array"}),t=a.SheetNames[0],r=a.Sheets[t],i=Fi.Wp.sheet_to_json(r);await this.guardarProductos(i)}catch(e){console.error("Error al leer el archivo:",e)}},o.readAsArrayBuffer(this.archivo)},async guardarProductos(o){try{for(const a of o){let o=a["Precio"];try{(o.startsWith("$")||o.startsWith("€"))&&(o=o.replace("$","").replace("€","")),o.includes(",")&&(o=o.replace(",","."))}catch{}const t={nombre:a["Producto"],precio:parseFloat(o),categoria:"Varios",disponibilidad:1,imagen:"",usuario:this.usuario};try{this.nuevoProducto(t)}catch(e){Lo().fire({icon:"error",text:"No se pudo agregar el producto."})}}}catch(e){Lo().fire({icon:"error",text:"No se pudo agregar el producto. Verifica la información del Excel."+e})}},obtenerUsuario(){this.producto.usuario=this.usuario=localStorage.getItem("usuario")},obtenerCategorias(){t.A.get(`/categorias?usuario=${localStorage.getItem("usuario")}`).then((o=>{this.categorias=o.data})).catch((o=>{console.error("Error al obtener las categorías:",o)}))},iniciarCropper(){},imagenSeleccionada(o){try{const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0;let e=this.$refs.cropperImg;e.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new st.Ay(e,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoCropper=!1}},cerrarCrop(){this.modalCropImage=!1},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.producto.imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}},nuevoProducto(o){"Categoría"==o.categoria?Lo().fire({icon:"error",text:"Elegí o agregá una categoría."}):(this.botonAgregarProductoEnabled=!1,o.stock||(o.stock=-1),t.A.post("/nuevoProducto",{producto:o}).then((()=>{const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Producto agregado."}),setTimeout((function(){location.reload()}),2e3)})).catch((()=>{Lo().fire({icon:"error",text:"No se pudo agregar el producto."})})))},agregarCategoria(){try{this.botonAgregarCategoriaEnabled=!1,t.A.post("nuevaCategoria",{categoria_nombre:this.categoria_nombre,usuario_nombre:localStorage.getItem("usuario")}).then((()=>{this.obtenerCategorias(),this.producto.categoria=this.categoria_nombre,this.categoria_nombre="";const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Categoría agregada."}),this.agregarCategoriaModalAbierto=!1})).catch((o=>{Lo().fire({icon:"error",text:"No se pudo agregar la categoría. "+o.response.data.message})}))}catch(o){console.log(o)}finally{this.botonAgregarCategoriaEnabled=!0}}},mounted(){window.scrollTo({top:0,behavior:"smooth"})}};const Ui=(0,h.A)(Xi,[["render",ei],["__scopeId","data-v-1745758e"]]);var Ri=Ui;const Vi=o=>((0,i.Qi)("data-v-255303b3"),o=o(),(0,i.jt)(),o),zi={key:0,class:"pantalla-carga text-center"},Qi=Vi((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando productos")],-1))),Di=[Qi],Wi={class:"container pt-4 mb-2"},$i=Vi((()=>(0,i.Lk)("h1",{class:"text-center"},"Productos",-1))),Bi={class:"flex"},ji=Vi((()=>(0,i.Lk)("img",{src:"/recursos/plus.png",width:"40",alt:""},null,-1))),Oi={class:"ancho mt-2"},Ji=["id"],Gi={key:0},Hi={class:"flex"},Ki=["onClick"],Yi={key:0,class:"inline"},Zi={key:1,class:"inline"},on={class:"flex-end"},en=["onClick"],an={class:"p-2"},tn={key:0,class:"item-imagen"},rn=["src"],nn={class:"item-texto-block"},sn={class:"item-texto-block-start"},cn={class:"item-nombre"},ln={class:"item-precio"},dn={key:0,class:"item-descripcion"},un={key:1,class:"item-stock"},pn={class:"item-texto-block-end"},mn={class:"justify-content-center"},gn={class:"form-check form-switch"},bn=["onChange","checked"],hn=["onClick"],vn=["onClick"],kn={key:0,class:"text-center mt-3"},fn={class:"modalCategoria"},Ln={class:"modal-dialog modal-dialog-centered"},Cn={class:"modal-content"},yn={class:"modal-header"},wn=Vi((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"modificarProductoLabel"}," Modificar Producto ",-1))),xn=Vi((()=>(0,i.Lk)("hr",null,null,-1))),Pn={class:"modal-body"},En={class:"row g-3 div-forms"},Sn={class:"col-md-6"},Mn=Vi((()=>(0,i.Lk)("label",{class:"form-label",for:"nombre"},"Nombre",-1))),In={class:"col-md-6"},An=Vi((()=>(0,i.Lk)("label",{class:"form-label",for:"descripcion"},"Descripción",-1))),_n={class:"col-md-6"},Tn=Vi((()=>(0,i.Lk)("label",{class:"form-label",for:"categoria"},"Categoría",-1))),Nn=Vi((()=>(0,i.Lk)("option",{selected:"",disabled:""},"Categoría",-1))),qn=["value"],Fn={class:"col-md-6"},Xn=Vi((()=>(0,i.Lk)("label",{class:"form-label",for:"precio"},"Precio",-1))),Un=Vi((()=>(0,i.Lk)("i",{class:"small"},'Si el precio es menor a 0, se publicará como "consultar precio"',-1))),Rn={class:"col-md-6"},Vn=Vi((()=>(0,i.Lk)("label",{class:"form-label",for:"stock"},"Stock (si no manejás stock de este producto poné -1)",-1))),zn={class:"col-md-6"},Qn=Vi((()=>(0,i.Lk)("label",{class:"form-label mr-2",for:"imagen"},"Imagen (JPG/PNG)",-1))),Dn={class:"modal-footer mt-2"},Wn=Vi((()=>(0,i.Lk)("button",{class:"btn btn-menu",type:"submit"},"Modificar",-1))),$n={key:1,class:"modalCategoriaContainer"},Bn={class:"modalCategoria"},jn={class:"modal-dialog modal-dialog-centered"},On={class:"modal-content"},Jn={class:"modal-header pl-2"},Gn=Vi((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Nueva Categoría",-1))),Hn={class:"modal-body mt-2"},Kn={class:"modal-footer mt-2"},Yn=Vi((()=>(0,i.Lk)("button",{class:"btn btn-agregar",type:"submit"},"Agregar",-1))),Zn={key:2,class:"modalCategoriaContainer"},os={class:"modalCategoria"},es={class:"modal-dialog modal-dialog-centered"},as={class:"modal-content"},ts={class:"modal-header pl-2"},rs=Vi((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Modificar Categoría",-1))),is={class:"modal-body mt-2"},ns={class:"modal-footer mt-2"},ss=Vi((()=>(0,i.Lk)("button",{class:"btn btn-agregar",type:"submit"},"Modificar",-1))),cs={class:"modalCategoriaContainer text-center"},ls={class:"modalCategoria"},ds={class:"modal-dialog modal-dialog-centered"},us={class:"modal-content"},ps={class:"modal-header pl-2"},ms=Vi((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),gs={class:"modal-body mt-2"},bs={class:"pantalla-cargas text-center"},hs=Vi((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),vs=[hs],ks={ref:"cropperImg",alt:"Croppear"},fs={class:"modal-footer mt-2"};function Ls(o,e,a,t,n,s){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),n.cargando?((0,i.uX)(),(0,i.CE)("div",zi,Di)):(0,i.Q3)("",!0),(0,i.Lk)("div",Wi,[$i,(0,i.Lk)("div",Bi,[(0,i.bo)((0,i.Lk)("input",{class:"form-control form-control-busqueda","onUpdate:modelValue":e[0]||(e[0]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]]),(0,i.bF)(d,{class:"flex-end",to:"/u/nuevoProducto"},{default:(0,i.k6)((()=>[ji])),_:1})]),(0,i.Lk)("div",Oi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.categoriasOrdenadas,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"mt-2",key:a,id:o},[s.filteredProductos(o)?((0,i.uX)(),(0,i.CE)("div",Gi,[(0,i.Lk)("div",Hi,[(0,i.Lk)("div",{class:(0,c.C4)(["titulo-categoria",{"fondo-oscuro":n.categoriaSeleccionada===o}]),onClick:e=>s.toggleCategoria(o)},[(0,i.eW)((0,c.v_)(o)+" ",1),n.categoriaSeleccionada===o?((0,i.uX)(),(0,i.CE)("div",Yi,"↓")):((0,i.uX)(),(0,i.CE)("div",Zi,"→"))],10,Ki),(0,i.Lk)("div",on,[(0,i.Lk)("img",{class:"pointer",onClick:e=>s.abrirModificarCategoriaModal(o),width:"41.2",src:"/recursos/edit.png",alt:""},null,8,en)])]),(0,i.Lk)("div",{class:(0,c.C4)({"categoria-productos":!0,"categoria-activa":n.categoriaSeleccionada===o})},[(0,i.Lk)("div",an,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filteredProductos(o),((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"item-container mt-2",key:a},[o.producto_imagen?((0,i.uX)(),(0,i.CE)("div",tn,[(0,i.Lk)("div",null,[(0,i.Lk)("img",{class:"imagen",src:o.producto_imagen,onError:e[1]||(e[1]=(...o)=>s.imagenError&&s.imagenError(...o)),alt:" "},null,40,rn)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",nn,[(0,i.Lk)("div",sn,[(0,i.Lk)("div",cn,(0,c.v_)(o.producto_nombre),1),(0,i.Lk)("div",ln," $"+(0,c.v_)(o.producto_precio),1),o.producto_descripcion?((0,i.uX)(),(0,i.CE)("div",dn,' "'+(0,c.v_)(o.producto_descripcion)+'" ',1)):(0,i.Q3)("",!0),-1!==o.producto_stock?((0,i.uX)(),(0,i.CE)("div",un," Stock: "+(0,c.v_)(o.producto_stock),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",pn,[(0,i.Lk)("div",mn,[(0,i.Lk)("div",gn,[(0,i.Lk)("input",{type:"checkbox",onChange:e=>s.actualizarEstadoProducto(o),class:"form-check-input",name:"",id:"productoDisponible",checked:1===o.producto_disponibilidad},null,40,bn)])]),(0,i.Lk)("img",{class:"pointer",onClick:e=>s.modificar(o),width:"41.2",src:"/recursos/edit.png",alt:""},null,8,hn),(0,i.Lk)("img",{class:"pointer",onClick:e=>s.eliminar(o.producto_id),width:"41.2",src:"/recursos/delete.png",alt:""},null,8,vn)])])))),128))])],2)])):(0,i.Q3)("",!0)],8,Ji)))),128)),0===s.productosFiltrados.length?((0,i.uX)(),(0,i.CE)("div",kn," No se encontraron resultados. ")):(0,i.Q3)("",!0)]),n.modificarModalAbierto?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"modalCategoriaContainer",style:(0,c.Tr)({height:n.modalHeight+"px"})},[(0,i.Lk)("div",fn,[(0,i.Lk)("div",Ln,[(0,i.Lk)("div",Cn,[(0,i.Lk)("div",yn,[wn,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[2]||(e[2]=(...o)=>s.cerrarModificarModal&&s.cerrarModificarModal(...o)),"aria-label":"Close"})]),xn,(0,i.Lk)("div",Pn,[(0,i.Lk)("form",{onSubmit:e[11]||(e[11]=(0,r.D$)((o=>s.modificarProducto(this.productoModificar)),["prevent"]))},[(0,i.Lk)("div",En,[(0,i.Lk)("div",Sn,[Mn,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[3]||(e[3]=o=>n.productoModificar.producto_nombre=o),required:""},null,512),[[r.Jo,n.productoModificar.producto_nombre]])]),(0,i.Lk)("div",In,[An,(0,i.bo)((0,i.Lk)("textarea",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":e[4]||(e[4]=o=>n.productoModificar.producto_descripcion=o),placeholder:"Descripción"},null,512),[[r.Jo,n.productoModificar.producto_descripcion]])]),(0,i.Lk)("div",_n,[Tn,(0,i.bo)((0,i.Lk)("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=o=>n.productoModificar.producto_categoria=o),id:"",required:""},[Nn,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.categorias,(o=>((0,i.uX)(),(0,i.CE)("option",{key:o.id,value:o.categoria_nombre},(0,c.v_)(o.categoria_nombre),9,qn)))),128))],512),[[r.u1,n.productoModificar.producto_categoria]]),(0,i.Lk)("button",{type:"button",class:"btn btn-agregar mt-2",onClick:e[6]||(e[6]=(...o)=>s.agregarCategoriaModal&&s.agregarCategoriaModal(...o))}," Agregar Categoría ")]),(0,i.Lk)("div",Fn,[Xn,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"precio","onUpdate:modelValue":e[7]||(e[7]=o=>n.productoModificar.producto_precio=o),placeholder:"Precio (sin $)"},null,512),[[r.Jo,n.productoModificar.producto_precio]]),Un]),(0,i.Lk)("div",Rn,[Vn,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"stock","onUpdate:modelValue":e[8]||(e[8]=o=>n.productoModificar.producto_stock=o),placeholder:"Stock"},null,512),[[r.Jo,n.productoModificar.producto_stock]])]),(0,i.Lk)("div",zn,[Qn,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:e[9]||(e[9]=(...o)=>s.imagenSeleccionada&&s.imagenSeleccionada(...o))},null,32)])]),(0,i.Lk)("div",Dn,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[10]||(e[10]=(...o)=>s.cerrarModificarModal&&s.cerrarModificarModal(...o))},"Cerrar"),Wn])],32)])])])])],4)):(0,i.Q3)("",!0),n.agregarCategoriaModalAbierto?((0,i.uX)(),(0,i.CE)("div",$n,[(0,i.Lk)("div",Bn,[(0,i.Lk)("div",jn,[(0,i.Lk)("div",On,[(0,i.Lk)("div",Jn,[Gn,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[12]||(e[12]=(...o)=>s.cerrarCategoriaModal&&s.cerrarCategoriaModal(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",Hn,[(0,i.Lk)("form",{onSubmit:e[15]||(e[15]=(0,r.D$)(((...o)=>s.agregarCategoria&&s.agregarCategoria(...o)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[13]||(e[13]=o=>n.categoria_nombre=o),placeholder:"Nombre de la Categoría",required:""},null,512),[[r.Jo,n.categoria_nombre]]),(0,i.Lk)("div",Kn,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[14]||(e[14]=(...o)=>s.cerrarCategoriaModal&&s.cerrarCategoriaModal(...o))},"Cerrar"),Yn])],32)])])])])])):(0,i.Q3)("",!0),n.modificarCategoriaModalAbierto?((0,i.uX)(),(0,i.CE)("div",Zn,[(0,i.Lk)("div",os,[(0,i.Lk)("div",es,[(0,i.Lk)("div",as,[(0,i.Lk)("div",ts,[rs,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[16]||(e[16]=(...o)=>s.cerrarModificarCategoriaModal&&s.cerrarModificarCategoriaModal(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",is,[(0,i.Lk)("form",{onSubmit:e[19]||(e[19]=(0,r.D$)(((...o)=>s.modificarCategoria&&s.modificarCategoria(...o)),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre","onUpdate:modelValue":e[17]||(e[17]=o=>n.categoriaNueva=o),placeholder:"Nombre de la Categoría",required:""},null,512),[[r.Jo,n.categoriaNueva]]),(0,i.Lk)("div",ns,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[18]||(e[18]=(...o)=>s.cerrarModificarCategoriaModal&&s.cerrarModificarCategoriaModal(...o))},"Cerrar"),ss])],32)])])])])])):(0,i.Q3)("",!0),(0,i.bo)((0,i.Lk)("div",cs,[(0,i.Lk)("div",ls,[(0,i.Lk)("div",ds,[(0,i.Lk)("div",us,[(0,i.Lk)("div",ps,[ms,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[20]||(e[20]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",gs,[(0,i.bo)((0,i.Lk)("div",bs,vs,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",ks,null,512)]),(0,i.Lk)("div",fs,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[21]||(e[21]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[22]||(e[22]=(...o)=>s.guardarImagenRecortada&&s.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]])])])}var Cs={components:{NavbarComponent:qi},data(){return{cargandoCropper:!0,cropper:null,imageToCrop:"",modalCropImage:!1,categoriaSeleccionada:null,cargando:!0,productos:[],productoModificar:"",busqueda:"",usuario:localStorage.getItem("usuario"),producto:{nombre:"",descripcion:"",categoria:"Categoría",precio:"",imagen:"",stock:"",usuario:""},categoria_nombre:"",categoriaVieja:"",categoriaNueva:"",categorias:[],agregarCategoriaModalAbierto:!1,modificarModalAbierto:!1,modificarCategoriaModalAbierto:!1,modalHeight:""}},mounted(){window.scrollTo({top:0,behavior:"smooth"})},created(){this.fetchProductos()},computed:{categoriasOrdenadas(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))].sort()},productosFiltrados(){const o=o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return this.productos.filter((e=>{const a=e.producto_nombre||"",t=e.producto_descripcion||"",r=e.producto_categoria||"",i=e.producto_precio||"",n=o(this.busqueda.toLowerCase());return o(a.toLowerCase()).includes(n)||o(t.toLowerCase()).includes(n)||o(r.toLowerCase()).includes(n)||o(i.toString().toLowerCase()).includes(n)}))},categoriasConProductosFiltrados(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))]}},methods:{imagenError(o){o.target.src="/recursos/missing.png"},modificarCategoria(){t.A.put("/modificarCategoria",{usuario:this.usuario,categoriaVieja:this.categoriaVieja,categoriaNueva:this.categoriaNueva}).then((()=>{const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Categoría modificada."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{Lo().fire({icon:"error",text:"No se pudo modificar la categoría. "+o.response.data.message})})).finally((()=>{this.modificarCategoriaModalAbierto=!1}))},cerrarModificarModal(){this.modificarModalAbierto=!1},cerrarCategoriaModal(){this.agregarCategoriaModalAbierto=!1},agregarCategoriaModal(){window.scrollTo({top:0,behavior:"smooth"}),this.agregarCategoriaModalAbierto=!0},cerrarModificarCategoriaModal(){this.modificarCategoriaModalAbierto=!1},abrirModificarCategoriaModal(o){window.scrollTo({top:0,behavior:"smooth"}),this.modificarCategoriaModalAbierto=!0,this.categoriaVieja=this.categoriaNueva=o},toggleCategoria(o){this.categoriaSeleccionada===o?this.categoriaSeleccionada=null:this.categoriaSeleccionada=o},filteredProductos(o){return this.productosFiltrados.filter((e=>e.producto_categoria===o))},async fetchCategorias(){t.A.get(`/categorias?usuario=${localStorage.getItem("usuario")}`).then((o=>{this.categorias=o.data})).catch((o=>{console.error("Error al obtener las categorías:",o)}))},modificar(o){this.fetchCategorias(),this.productoModificar=o;const e=document.body.clientHeight;this.modalHeight=e,window.scrollTo({top:0,behavior:"smooth"}),this.modificarModalAbierto=!0},actualizarEstadoProducto(o){o.producto_disponibilidad?o.producto_disponibilidad=0:o.producto_disponibilidad=1,t.A.put("/actualizarDisponibilidad",{productoId:o.producto_id,nuevoEstado:o.producto_disponibilidad}).then((()=>{})).catch((e=>{console.error("Error al actualizar el estado en la base de datos:",e),o.producto_disponibilidad=!o.producto_disponibilidad}))},async fetchProductos(){try{const o=await t.A.get(`/productos?usuario=${this.usuario}`);this.productos=o.data}catch(o){console.error("Error al cargar los productos:",o)}finally{this.cargando=!1}},modificarProducto(o){t.A.put("/modificarProducto",{producto:o}).then((()=>{this.modificarModalAbierto=!1;const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Producto modificado."})})).catch((o=>{console.error("Error al actualizar el estado en la base de datos:",o)}))},eliminar(o){Lo().fire({icon:"info",title:"<strong>¿Estas segur@?</strong>",html:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonText:"No, cancelar",confirmButtonText:"Sí, eliminar!"}).then((e=>{e.isConfirmed&&t.A.delete(`/eliminarProducto?id=${o}`).then((()=>{const e=this.productos.findIndex((e=>e.producto_id===o));-1!==e&&this.productos.splice(e,1);const a=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});a.fire({icon:"success",title:"Producto eliminado."})})).catch((o=>{console.error("Error al eliminar el producto:",o),Lo().fire({icon:"error",title:"Error al eliminar",text:o.message})}))}))},agregarCategoria(){t.A.post("nuevaCategoria",{categoria_nombre:this.categoria_nombre,usuario_nombre:localStorage.getItem("usuario")}).then((()=>{this.productoModificar.producto_categoria=this.categoria_nombre,this.categoria_nombre="";const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Categoría agregada."}),this.agregarCategoriaModalAbierto=!1})).catch((o=>{Lo().fire({icon:"error",text:"No se pudo agregar la categoría. "+o.response.data.message})}))},imagenSeleccionada(o){try{const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0;let e=this.$refs.cropperImg;e.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new st.Ay(e,{template:"<cropper-canvas background style='height:50vh;'>\n                  <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoCropper=!1}},cerrarCrop(){this.modalCropImage=!1},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.productoModificar.producto_imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}}}};const ys=(0,h.A)(Cs,[["render",Ls],["__scopeId","data-v-255303b3"]]);var ws=ys;const xs=o=>((0,i.Qi)("data-v-61d9fdb8"),o=o(),(0,i.jt)(),o),Ps={key:0},Es={key:1,class:"pantalla-carga text-center"},Ss=xs((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando productos ")],-1))),Ms=[Ss],Is={key:2},As={class:"absolute"},_s={class:"container"},Ts={class:"flex"},Ns=["src"],qs={class:"ancho-busqueda input-group mcenter"},Fs={key:0,class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},Xs=xs((()=>(0,i.Lk)("span",{class:"navbar-toggler-icon"},null,-1))),Us=[Xs],Rs={class:"collapse navbar-collapse text-end bg-black",id:"navbarSupportedContent"},Vs={class:"navbar-nav m-2"},zs={class:"nav-item"},Qs={class:"container2"},Ds={key:0},Ws={class:"presentacion"},$s={class:"imagen-container"},Bs=["src"],js={key:1,src:"/recursos/missing.png",class:"img-negocio",alt:""},Os={class:"texto-superpuesto"},Js={class:"texto-superpuesto2"},Gs={class:"text-center redes"},Hs={key:0},Ks=["href"],Ys=xs((()=>(0,i.Lk)("img",{width:"40",src:"/recursos/instagram.png"},null,-1))),Zs=[Ys],oc=["href"],ec=xs((()=>(0,i.Lk)("img",{width:"36",src:"/recursos/facebook.png"},null,-1))),ac=[ec],tc=xs((()=>(0,i.Lk)("br",null,null,-1))),rc={class:"text-center"},ic=xs((()=>(0,i.Lk)("img",{class:"ml",src:"/recursos/whatsapp.png",width:"30",alt:""},null,-1))),nc={key:0,class:"justify-content-center mt-2"},sc={class:"carrusel"},cc={class:"publicacion-container"},lc=["src","onClick"],dc={key:0,class:"publicacion-agrandada"},uc=xs((()=>(0,i.Lk)("img",{src:"/recursos/previous.png",width:"20",alt:""},null,-1))),pc=[uc],mc=xs((()=>(0,i.Lk)("img",{src:"/recursos/next.png",width:"20",alt:""},null,-1))),gc=[mc],bc=["src"],hc={class:"body-container"},vc={class:"ancho"},kc=["id"],fc={key:0},Lc=["onClick"],Cc={key:0,class:"inline"},yc={key:1,class:"inline"},wc={class:"p-2"},xc={key:0,class:"item-imagen"},Pc=["src"],Ec={class:"item-texto-block"},Sc={class:"item-texto-block-start"},Mc={class:"item-nombre"},Ic={class:"item-precio"},Ac={key:0,class:"item-descripcion"},_c={key:1,class:"item-texto-block-end"},Tc=["onClick"],Nc={class:"cantidad"},qc=["onClick","disabled"],Fc={class:"ver-carrito-btn","data-bs-toggle":"modal","data-bs-target":"#modalCarrito"},Xc={key:1,class:"text-center mt-3"},Uc={key:1},Rc={class:"error-content"},Vc={key:0,class:"display-1"},zc=["src"],Qc={class:"display-4"},Dc=xs((()=>(0,i.Lk)("p",{class:"lead"},[(0,i.eW)("Estamos construyendo nuestro puestito."),(0,i.Lk)("br")],-1))),Wc={key:1},$c={key:2},Bc=["href"],jc=xs((()=>(0,i.Lk)("img",{width:"40",src:"/recursos/instagram.png"},null,-1))),Oc=[jc],Jc=["href"],Gc=xs((()=>(0,i.Lk)("img",{width:"36",src:"/recursos/facebook.png"},null,-1))),Hc=[Gc],Kc=xs((()=>(0,i.Lk)("br",null,null,-1))),Yc={key:5,class:"mt-3"},Zc={key:2},ol={class:"error-content"},el=xs((()=>(0,i.Lk)("h1",{class:"display-1 text-danger"},"404",-1))),al=xs((()=>(0,i.Lk)("h2",{class:"display-4"},"Puestito no encontrado",-1))),tl=xs((()=>(0,i.Lk)("p",{class:"lead"},"Lo sentimos, el puestito que buscas no se encuentra disponible o no tiene productos disponibles.",-1))),rl={class:"modal fade",id:"modalCarrito",tabindex:"-1","aria-labelledby":"modalCarritoLabel","aria-hidden":"true"},il={class:"modal-dialog"},nl={class:"modal-content"},sl=xs((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"¿Todo listo para encargar?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),cl={class:"modal-body"},ll={key:0,class:"item-imagen"},dl=["src"],ul={class:"item-texto-block"},pl={class:"item-texto-block-start"},ml={class:"item-nombre"},gl={class:"item-precio"},bl={key:0,class:"item-descripcion"},hl={class:"item-texto-block-end"},vl=["onClick"],kl={class:"cantidad"},fl=["onClick","disabled"],Ll={class:"text-end mt-4"},Cl={class:"modal-footer"},yl=["disabled"],wl={class:"modal fade",id:"modalPedido",tabindex:"-1","aria-labelledby":"modalPedidoLabel","aria-hidden":"true"},xl={class:"modal-dialog"},Pl={class:"modal-content"},El=xs((()=>(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"},"Información del pedido"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Sl={class:"modal-body"},Ml=xs((()=>(0,i.Lk)("label",{class:"mt-2",for:"nombre"},"Nombre y Apellido",-1))),Il=xs((()=>(0,i.Lk)("label",{class:"mt-2",for:"medioPago"},"Medio de Pago",-1))),Al=xs((()=>(0,i.Lk)("option",{value:"Transferencia"},"Transferencia",-1))),_l=xs((()=>(0,i.Lk)("option",{value:"Efectivo"},"Efectivo",-1))),Tl=[Al,_l],Nl=xs((()=>(0,i.Lk)("label",{class:"mt-2",for:"direccion"},"Dirección de entrega",-1))),ql=xs((()=>(0,i.Lk)("label",{class:"mt-2",for:"detalles"},"Detalles del pedido",-1))),Fl={class:"modal-footer"},Xl=["disabled"];function Ul(o,e,a,t,n,s){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[n.usuarioLogueado?((0,i.uX)(),(0,i.CE)("div",Ps,[(0,i.bF)(l)])):(0,i.Q3)("",!0),n.cargando?((0,i.uX)(),(0,i.CE)("div",Es,Ms)):((0,i.uX)(),(0,i.CE)("div",Is,[(0,i.Lk)("div",As,[(0,i.Lk)("nav",{class:(0,c.C4)(["navbar navbar-dark bg-black",{"navbar-hidden":n.isHidden}])},[(0,i.Lk)("div",_s,[(0,i.Lk)("div",Ts,[(0,i.Lk)("a",{onClick:e[1]||(e[1]=(...o)=>s.scrollToInicio&&s.scrollToInicio(...o)),href:"#"},[(0,i.Lk)("img",{class:"nav-logo",src:n.negocio.imagen,onError:e[0]||(e[0]=(...o)=>s.imagenError&&s.imagenError(...o)),alt:""},null,40,Ns)]),(0,i.Lk)("div",qs,[(0,i.bo)((0,i.Lk)("input",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=o=>n.busqueda=o),type:"text",name:"busqueda",id:"",placeholder:"Buscar producto",title:"Ingrese una palabra clave..."},null,512),[[r.Jo,n.busqueda]]),(0,i.Lk)("button",{class:"btn-close btn-limpiar-busqueda",onClick:e[3]||(e[3]=(...o)=>s.limpiarBusqueda&&s.limpiarBusqueda(...o))})]),n.usuarioLogueado?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",Fs,Us))]),(0,i.Lk)("div",Rs,[(0,i.Lk)("ul",Vs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.categoriasOrdenadas,((o,e)=>((0,i.uX)(),(0,i.CE)("div",{key:e},[(0,i.Lk)("li",zs,[(0,i.bF)(d,{class:"nav-link",to:"/u/login"},{default:(0,i.k6)((()=>[(0,i.eW)("Ingresar")])),_:1})])])))),128))])])])],2)]),(0,i.Lk)("div",Qs,[n.productos.length?((0,i.uX)(),(0,i.CE)("div",Ds,[(0,i.Lk)("div",Ws,[(0,i.Lk)("div",$s,[n.negocio.portada?((0,i.uX)(),(0,i.CE)("img",{key:0,src:n.negocio.portada,onError:e[4]||(e[4]=(...o)=>s.imagenError&&s.imagenError(...o)),class:"img-negocio"},null,40,Bs)):((0,i.uX)(),(0,i.CE)("img",js)),(0,i.Lk)("div",Os,[(0,i.eW)("BIENVENIDOS "),(0,i.Lk)("div",Js,(0,c.v_)(n.negocio.descripcion),1),(0,i.Lk)("div",Gs,[n.negocio.direccion?((0,i.uX)(),(0,i.CE)("h4",Hs,(0,c.v_)(n.negocio.direccion),1)):(0,i.Q3)("",!0),n.negocio.instagram?((0,i.uX)(),(0,i.CE)("a",{key:1,class:"mauto",href:"https://instagram.com/"+n.negocio.instagram,target:"blank"},Zs,8,Ks)):(0,i.Q3)("",!0),n.negocio.facebook?((0,i.uX)(),(0,i.CE)("a",{key:2,class:"mauto",href:n.negocio.facebook,target:"blank"},ac,8,oc)):(0,i.Q3)("",!0),(0,i.eW)(),tc,(0,i.Lk)("div",rc,[(0,i.bo)((0,i.Lk)("img",{src:"/recursos/scroll-down.png",class:(0,c.C4)(["scroll-down",{"fade-in-out":n.isHidden}]),alt:""},null,2),[[r.aG,n.isHidden]])])])])])]),(0,i.Lk)("div",{class:"text-center mensajeWpp p-2 mt-2",onClick:e[5]||(e[5]=(...o)=>s.enviarMensaje&&s.enviarMensaje(...o))},[(0,i.eW)(" Enviá tu consulta "),ic]),n.publicaciones&&n.publicaciones.length>0?((0,i.uX)(),(0,i.CE)("div",nc,[(0,i.Lk)("div",sc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.publicaciones,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a,class:(0,c.C4)({"carrusel-item":!0,active:0===a})},[(0,i.Lk)("div",cc,[(0,i.Lk)("img",{class:"imagen-publicacion",src:o.publicacion,onError:e[6]||(e[6]=(...o)=>s.imagenError&&s.imagenError(...o)),alt:" ",onClick:o=>s.agrandarPublicacion(a)},null,40,lc)])],2)))),128))]),null!==n.publicacionAgrandada?((0,i.uX)(),(0,i.CE)("div",dc,[(0,i.Lk)("button",{onClick:e[7]||(e[7]=(...o)=>s.cerrarAgrandarPublicacion&&s.cerrarAgrandarPublicacion(...o)),class:"btn-close btn-close-agrandada"}),n.indiceAgrandada>0?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:e[8]||(e[8]=o=>s.agrandarPublicacion(n.indiceAgrandada-1)),class:"btn-anterior"},pc)):(0,i.Q3)("",!0),n.indiceAgrandada<n.publicaciones.length-1?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:e[9]||(e[9]=o=>s.agrandarPublicacion(n.indiceAgrandada+1)),class:"btn-siguiente"},gc)):(0,i.Q3)("",!0),(0,i.Lk)("img",{src:n.publicaciones[n.publicacionAgrandada].publicacion,class:"imagen-agrandada",alt:""},null,8,bc)])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),(0,i.Lk)("div",hc,[(0,i.Lk)("div",vc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.categoriasOrdenadas,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"mt-2",key:a,id:o},[s.filteredProductos(o)?((0,i.uX)(),(0,i.CE)("div",fc,[(0,i.Lk)("div",{class:(0,c.C4)(["titulo-categoria",{"fondo-oscuro":n.categoriaSeleccionada===o}]),onClick:e=>s.toggleCategoria(o)},[(0,i.eW)((0,c.v_)(o)+" ",1),n.categoriaSeleccionada===o?((0,i.uX)(),(0,i.CE)("div",Cc,"↓")):((0,i.uX)(),(0,i.CE)("div",yc,"→"))],10,Lc),(0,i.Lk)("div",{class:(0,c.C4)({"categoria-productos":!0,"categoria-activa":n.categoriaSeleccionada===o})},[(0,i.Lk)("div",wc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.filteredProductos(o),((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"item-container mt-2",key:a},[o.producto_imagen?((0,i.uX)(),(0,i.CE)("div",xc,[(0,i.Lk)("div",null,[(0,i.Lk)("img",{class:"imagen",src:o.producto_imagen,onError:e[10]||(e[10]=(...o)=>s.imagenError&&s.imagenError(...o)),alt:" "},null,40,Pc)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ec,[(0,i.Lk)("div",Sc,[(0,i.Lk)("div",Mc,(0,c.v_)(o.producto_nombre),1),(0,i.Lk)("div",Ic,(0,c.v_)(o.producto_precio>0?"$"+o.producto_precio:o.producto_precio<0?"Consultar precio":"Gratis"),1),o.producto_descripcion?((0,i.uX)(),(0,i.CE)("div",Ac,' "'+(0,c.v_)(o.producto_descripcion)+'" ',1)):(0,i.Q3)("",!0)])]),1==n.negocio.tipo?((0,i.uX)(),(0,i.CE)("div",_c,[(0,i.Lk)("button",{class:"btn-mas",onClick:e=>s.agregarAlCarrito(o)}," + ",8,Tc),(0,i.Lk)("div",Nc,(0,c.v_)(o.cantidadSeleccionada),1),(0,i.Lk)("button",{class:"btn-menos",onClick:e=>s.quitarDelCarrito(o),disabled:!o.cantidadSeleccionada}," - ",8,qc)])):(0,i.Q3)("",!0)])))),128))])],2)])):(0,i.Q3)("",!0)],8,kc)))),128)),n.carrito.length>0?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,c.C4)(n.usuarioLogueado?"ver-carrito-log":"ver-carrito")},[(0,i.Lk)("button",Fc,"Ver Carrito $"+(0,c.v_)(n.total),1)],2)):(0,i.Q3)("",!0),0===s.productosFiltrados.length?((0,i.uX)(),(0,i.CE)("div",Xc," No se encontraron resultados para esa búsqueda. ")):(0,i.Q3)("",!0)])])])):n.nombreNegocio?((0,i.uX)(),(0,i.CE)("div",Uc,[(0,i.Lk)("div",Rc,[n.negocio.imagen?((0,i.uX)(),(0,i.CE)("h1",Vc,[(0,i.Lk)("img",{src:n.negocio.imagen,onError:e[11]||(e[11]=(...o)=>s.imagenError&&s.imagenError(...o)),width:"100",alt:"",style:{"border-radius":"100%"}},null,40,zc)])):(0,i.Q3)("",!0),(0,i.Lk)("h2",Qc,(0,c.v_)(n.nombreNegocio),1),Dc,n.negocio.instagram||n.negocio.facebook?((0,i.uX)(),(0,i.CE)("p",Wc,"¡Seguinos en nuestras redes!")):((0,i.uX)(),(0,i.CE)("p",$c,"¡Volvé pronto!")),n.negocio.instagram?((0,i.uX)(),(0,i.CE)("a",{key:3,class:"mauto",href:"https://instagram.com/"+n.negocio.instagram,target:"blank"},Oc,8,Bc)):(0,i.Q3)("",!0),n.negocio.facebook?((0,i.uX)(),(0,i.CE)("a",{key:4,class:"mauto",href:"https://facebook.com/"+n.negocio.facebook,target:"blank"},Hc,8,Jc)):(0,i.Q3)("",!0),(0,i.eW)(),Kc,n.negocio.direccion?((0,i.uX)(),(0,i.CE)("p",Yc,(0,c.v_)(n.negocio.direccion),1)):(0,i.Q3)("",!0),(0,i.bF)(d,{to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver a Puestito Online")])),_:1})])])):((0,i.uX)(),(0,i.CE)("div",Zc,[(0,i.Lk)("div",ol,[el,al,tl,(0,i.bF)(d,{to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver a Puestito Online")])),_:1})])]))])])),(0,i.Lk)("div",rl,[(0,i.Lk)("div",il,[(0,i.Lk)("div",nl,[sl,(0,i.Lk)("div",cl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.carrito,((o,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"item-container mt-2",key:a},[o.producto_imagen?((0,i.uX)(),(0,i.CE)("div",ll,[(0,i.Lk)("div",null,[(0,i.Lk)("img",{class:"imagen",src:o.producto_imagen,onError:e[12]||(e[12]=(...o)=>s.imagenError&&s.imagenError(...o)),alt:" "},null,40,dl)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",ul,[(0,i.Lk)("div",pl,[(0,i.Lk)("div",ml,(0,c.v_)(o.producto_nombre),1),(0,i.Lk)("div",gl," $"+(0,c.v_)(o.producto_precio),1),o.producto_descripcion?((0,i.uX)(),(0,i.CE)("div",bl,' "'+(0,c.v_)(o.producto_descripcion)+'" ',1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",hl,[(0,i.Lk)("button",{class:"btn-mas",onClick:e=>s.agregarAlCarrito(o)}," + ",8,vl),(0,i.Lk)("div",kl,(0,c.v_)(o.cantidadSeleccionada),1),(0,i.Lk)("button",{class:"btn-menos",onClick:e=>s.quitarDelCarrito(o),disabled:!o.cantidadSeleccionada}," - ",8,fl)])])))),128)),(0,i.Lk)("h4",Ll,"Total: $"+(0,c.v_)(n.total),1)]),(0,i.Lk)("div",Cl,[(0,i.Lk)("button",{type:"button",class:"btn btn-limpiar","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[13]||(e[13]=(...o)=>s.limpiarCarrito&&s.limpiarCarrito(...o))},"Limpiar carrito"),(0,i.Lk)("button",{type:"button",class:"btn btn-menu",disabled:!n.carrito.length>0,"data-bs-toggle":"modal","data-bs-target":"#modalPedido"},"Realizar pedido",8,yl)])])])]),(0,i.Lk)("div",wl,[(0,i.Lk)("div",xl,[(0,i.Lk)("div",Pl,[El,(0,i.Lk)("form",{onSubmit:e[18]||(e[18]=(0,r.D$)(((...o)=>s.realizarPedido&&s.realizarPedido(...o)),["prevent"]))},[(0,i.Lk)("div",Sl,[Ml,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"nombre",class:"form-control",placeholder:"(obligatorio)","onUpdate:modelValue":e[14]||(e[14]=o=>n.pedido.nombre=o),required:""},null,512),[[r.Jo,n.pedido.nombre]]),Il,(0,i.bo)((0,i.Lk)("select",{class:"form-control form-select",id:"medioPago","onUpdate:modelValue":e[15]||(e[15]=o=>n.pedido.medio=o),required:""},Tl,512),[[r.u1,n.pedido.medio]]),Nl,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"direccion",class:"form-control",placeholder:"(opcional)","onUpdate:modelValue":e[16]||(e[16]=o=>n.pedido.direccion=o)},null,512),[[r.Jo,n.pedido.direccion]]),ql,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"detalles",class:"form-control",placeholder:"(opcional)","onUpdate:modelValue":e[17]||(e[17]=o=>n.pedido.detalle=o)},null,512),[[r.Jo,n.pedido.detalle]])]),(0,i.Lk)("div",Fl,[(0,i.Lk)("button",{type:"submit",class:"btn btn-menu",disabled:!n.carrito.length>0},"Realizar pedido",8,Xl)])],32)])])])])}var Rl={components:{NavbarComponent:qi},data(){return{publicacionAgrandada:null,usuarioLogueado:!1,isHidden:!0,categoriaSeleccionada:null,mostrarModal:!0,nombreUsuario:"",nombreNegocio:"",productos:[],busqueda:"",publicaciones:[],negocio:"",cargando:!0,carrito:[],total:0,indiceAgrandada:null,pedido:{nombre:"",medio:"Transferencia",direccion:"",detalle:""}}},async mounted(){window.scrollTo({top:0,behavior:"smooth"}),window.addEventListener("scroll",this.handleScroll),this.nombreUsuario=this.$route.params.nombreNegocio,localStorage.getItem("usuario")==this.nombreUsuario?this.usuarioLogueado=!0:this.usuarioLogueado=!1,await this.obtenerInformacionNegocio(),await this.fetchPublicaciones(),await this.actualizarOG()},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},computed:{categoriasOrdenadas(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))].sort()},productosFiltrados(){const o=o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return this.productos.filter((e=>{const a=e.producto_nombre||"",t=e.producto_descripcion||"",r=e.producto_categoria||"",i=e.producto_precio||"",n=o(this.busqueda.toLowerCase());return o(a.toLowerCase()).includes(n)||o(t.toLowerCase()).includes(n)||o(r.toLowerCase()).includes(n)||o(i.toString().toLowerCase()).includes(n)}))},categoriasConProductosFiltrados(){return[...new Set(this.productosFiltrados.map((o=>o.producto_categoria)))]}},methods:{imagenError(o){o.target.src="/recursos/missing.png"},async actualizarOG(){document.title=this.nombreNegocio,document.querySelector('meta[name="title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[property="og:title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[name="twitter:title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[itemprop="title"]').setAttribute("content",this.nombreNegocio),document.querySelector('meta[name="description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[name="DC.description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[property="og:description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[itemprop="description"]').setAttribute("content",this.negocio.descripcion),document.querySelector('meta[property="og:image"]').setAttribute("content",this.negocio.imagen),document.querySelector('meta[name="twitter:image"]').setAttribute("content",this.negocio.imagen),document.querySelector('meta[itemprop="image"]').setAttribute("content",this.negocio.imagen),document.querySelector('meta[property="og:url"]').setAttribute("content",window.location.href)},handleScroll(){let o=window.pageYOffset||document.documentElement.scrollTop;this.isHidden=0===o},toggleCategoria(o){this.categoriaSeleccionada===o?this.categoriaSeleccionada=null:this.categoriaSeleccionada=o},async obtenerCarrito(){if(null!==sessionStorage.getItem("carrito")){this.carrito=JSON.parse(sessionStorage.getItem("carrito")),this.total=parseFloat(sessionStorage.getItem("total"));for(const o of this.productos){const e=this.carrito.findIndex((e=>e.producto_id===o.producto_id));-1!==e&&(o.cantidadSeleccionada=this.carrito[e].cantidadSeleccionada)}}null!==localStorage.getItem("pedido")&&(this.pedido=JSON.parse(localStorage.getItem("pedido")))},enviarMensaje(){const o=navigator.userAgent||navigator.vendor||window.opera,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o);let a=e?"whatsapp://send":"https://web.whatsapp.com/send";const t=`Hola ${this.negocio.nombre}!`,r=`${a}?phone=${this.negocio.telefono}&text=${encodeURIComponent(t)}`;try{window.open(r),location.reload(1)}catch(i){Lo().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a WhatsApp."+i.response.data.message})}},realizarPedido(){localStorage.setItem("pedido",JSON.stringify(this.pedido));const o=`¡Hola *${this.negocio.nombre}*! \nQuiero realizar un pedido:\n\n`,e=this.carrito.reduce(((o,e)=>{const a=e.producto_categoria;return o[a]||(o[a]=[]),o[a].push(e),o}),{});let a="";for(const u in e)a+=`*${u}:*\n`,e[u].forEach((o=>{a+=`- *${o.producto_nombre}:* $${o.producto_precio} (${o.cantidadSeleccionada})\n`})),a+="\n";const t=`*Total: $${this.total}*\n\n`;let r=`*Nombre:* ${this.pedido.nombre}\n*Medio de pago:* ${this.pedido.medio}\n`;this.pedido.direccion&&(r+=`*Dirección:* ${this.pedido.direccion}\n`),this.pedido.detalle&&(r+=`*Detalle:* ${this.pedido.detalle}\n`),r+="\n¡Muchas gracias!";const i=o+a+t+r;console.log(i);const n=navigator.userAgent||navigator.vendor||window.opera,s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n);let c=s?"whatsapp://send":"https://web.whatsapp.com/send";const l=`${c}?phone=${this.negocio.telefono}&text=${encodeURIComponent(i)}`;try{window.open(l),location.reload(1)}catch(d){Lo().fire({icon:"error",text:"Por favor habilita las ventanas emergentes para ir a WhatsApp."+d.response.data.message})}},agregarAlCarrito(o){const e=this.carrito.findIndex((e=>e.producto_id===o.producto_id));-1!==e?(o.cantidadSeleccionada++,this.carrito[e].cantidadSeleccionada=o.cantidadSeleccionada,this.total+=Number(o.producto_precio)):(o.cantidadSeleccionada=1,this.carrito.push(o),this.total+=Number(o.producto_precio)),sessionStorage.setItem("carrito",JSON.stringify(this.carrito)),sessionStorage.setItem("total",JSON.stringify(this.total))},quitarDelCarrito(o){const e=this.carrito.findIndex((e=>e.producto_id===o.producto_id));-1!==e&&(o.cantidadSeleccionada--,this.carrito[e].cantidadSeleccionada=o.cantidadSeleccionada,this.total-=Number(o.producto_precio),0===this.carrito[e].cantidadSeleccionada&&this.carrito.splice(e,1)),sessionStorage.setItem("carrito",JSON.stringify(this.carrito)),sessionStorage.setItem("total",JSON.stringify(this.total))},limpiarCarrito(){sessionStorage.clear(),this.carrito=[],this.total=0,this.productos.forEach((o=>{o.cantidadSeleccionada=0}))},async obtenerInformacionNegocio(){try{const o=await t.A.get(`/negocio?usuario=${this.nombreUsuario}`);this.negocio=o.data,this.nombreNegocio=o.data.nombre,await this.fetchProductos()}catch(o){console.error("Error al cargar los productos:",o)}finally{this.cargando=!1}},scrollToCategoria(o){const e=document.getElementById(o);if(e){const o=document.querySelector(".navbar").offsetHeight,a=e.getBoundingClientRect().top;window.scrollTo({top:window.scrollY+a-o,behavior:"smooth"})}this.toggleCategoria(o)},scrollToInicio(){window.scrollTo({top:0,behavior:"smooth"})},collapseNavbar(){const o=document.querySelector(".navbar-toggler"),e=document.querySelector(".navbar-collapse");o&&e.classList.contains("show")&&o.click()},async fetchProductos(){try{const o=await t.A.get(`/productos?usuario=${this.nombreUsuario}`),e=o.data.filter((o=>o.producto_disponibilidad)),a=e.sort(((o,e)=>{const a=o.producto_nombre.toUpperCase(),t=e.producto_nombre.toUpperCase();return a<t?-1:a>t?1:0}));a.forEach((o=>{o.cantidadSeleccionada=0})),this.productos=a,this.obtenerCarrito()}catch(o){console.error("Error al cargar los productos:",o)}},async fetchPublicaciones(){try{const o=await t.A.get(`/publicaciones?usuario=${this.nombreUsuario}`);this.publicaciones=o.data.sort(((o,e)=>e.id-o.id))}catch(o){console.error(o)}},filteredProductos(o){return this.productosFiltrados.filter((e=>e.producto_categoria===o&&1===e.producto_disponibilidad))},limpiarBusqueda(){this.busqueda=""},agrandarPublicacion(o){this.indiceAgrandada=o,this.publicacionAgrandada=o},cerrarAgrandarPublicacion(){this.indiceAgrandada=null,this.publicacionAgrandada=null}}};const Vl=(0,h.A)(Rl,[["render",Ul],["__scopeId","data-v-61d9fdb8"]]);var zl=Vl;const Ql=o=>((0,i.Qi)("data-v-0f1cee7e"),o=o(),(0,i.jt)(),o),Dl={key:0,class:"pantalla-carga text-center"},Wl=Ql((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando información")],-1))),$l=[Wl],Bl={class:"container pt-4 mb-2 text-center"},jl={key:0},Ol=Ql((()=>(0,i.Lk)("h1",{class:"text-center"},"Perfil",-1))),Jl={class:"p-2 text-center"},Gl={key:0,class:"textoTarjeta"},Hl=Ql((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2 mt-2"},"Esta es una cuenta gratis.",-1))),Kl={key:1,class:"textoTarjeta"},Yl=Ql((()=>(0,i.Lk)("h4",{class:"titulo-div-forms mb-2 mt-2"},"Esta es una cuenta Premium.",-1))),Zl={class:"titulo-div-forms"},od=Ql((()=>(0,i.Lk)("hr",null,null,-1))),ed={class:"editar-perfil mt-4 text-start p-4"},ad={key:0,class:"item-perfil"},td={class:""},rd=Ql((()=>(0,i.Lk)("h3",null,"Tipo",-1))),id=Ql((()=>(0,i.Lk)("option",{value:"0"},"Menú (solo se muestran tus productos)",-1))),nd=Ql((()=>(0,i.Lk)("option",{value:"1"},"Carrito (pedidos por WhatsApp)",-1))),sd=[id,nd],cd={class:"item-perfil mt-4 text-center"},ld={class:"seccion-perfil text-start"},dd=Ql((()=>(0,i.Lk)("h3",null,"Logo",-1))),ud=["src"],pd={class:"item-perfil mt-4 text-center"},md={class:"seccion-perfil text-start"},gd=Ql((()=>(0,i.Lk)("h3",null,"Portada",-1))),bd=["src"],hd={class:"item-perfil mt-4"},vd=Ql((()=>(0,i.Lk)("div",{class:"seccion-perfil"},[(0,i.Lk)("h3",null,"Datos")],-1))),kd={class:""},fd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"nombre"},"Nombre",-1))),Ld={class:"mt-2"},Cd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"correo"},"Correo",-1))),yd={class:"mt-2"},wd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"telefono"},"Teléfono",-1))),xd={class:"mt-2"},Pd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"direccion"},"Dirección",-1))),Ed={class:"mt-2"},Sd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"descripcion"},"Descripción",-1))),Md={class:"mt-2"},Id=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"rubro"},"Rubro",-1))),Ad=(0,i.Fv)('<option value="Elegí tu rubro" selected disabled data-v-0f1cee7e>Elegí tu rubro</option><option value="Artesanías" data-v-0f1cee7e>Artesanías</option><option value="Bar/Restaurante" data-v-0f1cee7e>Bar/Restaurante</option><option value="Carnicería" data-v-0f1cee7e>Carnicería</option><option value="Consultorio" data-v-0f1cee7e>Consultorio</option><option value="Estética" data-v-0f1cee7e>Estética</option><option value="Farmacia" data-v-0f1cee7e>Farmacia</option><option value="Ferretería" data-v-0f1cee7e>Ferretería</option><option value="Fiambrería" data-v-0f1cee7e>Fiambrería</option><option value="Florería" data-v-0f1cee7e>Florería</option><option value="Heladería" data-v-0f1cee7e>Heladería</option><option value="Indumentaria" data-v-0f1cee7e>Indumentaria</option><option value="Inmobiliaria" data-v-0f1cee7e>Inmobiliaria</option><option value="Juguetería" data-v-0f1cee7e>Juguetería</option><option value="Librería" data-v-0f1cee7e>Librería</option><option value="Limpieza" data-v-0f1cee7e>Limpieza</option><option value="Panadería" data-v-0f1cee7e>Panadería</option><option value="Peluquería" data-v-0f1cee7e>Peluquería</option><option value="Polirubro" data-v-0f1cee7e>Polirubro</option><option value="Pollería" data-v-0f1cee7e>Pollería</option><option value="Repostería" data-v-0f1cee7e>Repostería</option><option value="Rotisería" data-v-0f1cee7e>Rotisería</option><option value="Reparación/mantenimiento" data-v-0f1cee7e>Reparación/mantenimiento </option><option value="Servicios" data-v-0f1cee7e>Servicios</option><option value="Supermercado" data-v-0f1cee7e>Supermercado</option><option value="Tecnología" data-v-0f1cee7e>Tecnología</option><option value="Verdulería" data-v-0f1cee7e>Verdulería</option><option value="Veterinaria/Forrajería" data-v-0f1cee7e>Veterinaria/Forrajería</option>',28),_d=[Ad],Td={class:"mt-2"},Nd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"instagram"},"Instagram",-1))),qd={class:"mt-2"},Fd=Ql((()=>(0,i.Lk)("label",{class:"form-label",for:"facebook"},"Facebook",-1))),Xd=Ql((()=>(0,i.Lk)("div",{class:"flex mt-3"},[(0,i.Lk)("button",{class:"btn btn-menu-danger","data-bs-toggle":"modal","data-bs-target":"#cerrarSesionModal2"}," Cerrar Sesión "),(0,i.Lk)("button",{class:"btn btn-menu",type:"submit"},"Guardar")],-1))),Ud={class:"modal fade",id:"cerrarSesionModal2",tabindex:"-1","aria-labelledby":"cerrarSesionModal2Label","aria-hidden":"true"},Rd={class:"modal-dialog"},Vd={class:"modal-content"},zd=Ql((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"cerrarSesionModal2Label"},"¿Cerrar sesión?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Qd={class:"modal-footer text-center"},Dd=Ql((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1))),Wd={class:"modal fade",id:"modificarProducto",tabindex:"-1","aria-labelledby":"modificarDatosLabel","aria-hidden":"true",ref:"modalModificar"},$d={class:"modal-dialog modal-dialog-centered"},Bd={class:"modal-content"},jd={class:"modal-header"},Od=Ql((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"modificarDatosLabel"},"Modificar Datos",-1))),Jd=Ql((()=>(0,i.Lk)("div",{class:"modal-body"},null,-1))),Gd={class:"modalCategoriaContainer text-center"},Hd={class:"modalCategoria"},Kd={class:"modal-dialog modal-dialog-centered"},Yd={class:"modal-content"},Zd={class:"modal-header pl-2"},ou=Ql((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),eu={class:"modal-body mt-2"},au={class:"pantalla-cargas text-center"},tu=Ql((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),ru=[tu],iu={ref:"cropperImg",alt:"Croppear"},nu={class:"modal-footer mt-2"},su={class:"modalCategoriaContainer text-center"},cu={class:"modalCategoria"},lu={class:"modal-dialog modal-dialog-centered"},du={class:"modal-content"},uu={class:"modal-header pl-2"},pu=Ql((()=>(0,i.Lk)("h1",{class:"modal-title fs-5",id:"agregarCategoriaLabel"},"Recortar Imagen",-1))),mu={class:"modal-body mt-2"},gu={class:"pantalla-cargas text-center"},bu=Ql((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando imagen ")],-1))),hu=[bu],vu={ref:"cropperPortada",alt:"Croppear"},ku={class:"modal-footer mt-2"};function fu(o,e,a,t,n,s){const l=(0,i.g2)("NavbarComponent");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),n.obteniendoInfo?((0,i.uX)(),(0,i.CE)("div",Dl,$l)):(0,i.Q3)("",!0),(0,i.Lk)("div",Bl,[n.negocio?((0,i.uX)(),(0,i.CE)("div",jl,[Ol,(0,i.Lk)("div",Jl,[n.esPremium?((0,i.uX)(),(0,i.CE)("div",Gl,[Hl,(0,i.Lk)("button",{onClick:e[0]||(e[0]=(...o)=>s.mejorarPlan&&s.mejorarPlan(...o)),class:"btn btn-agregar"},"Mejorar Plan")])):((0,i.uX)(),(0,i.CE)("div",Kl,[Yl,(0,i.Lk)("h4",Zl,"Vence: "+(0,c.v_)(n.fechaVence),1)])),od,(0,i.Lk)("div",ed,[n.esPremium?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ad,[(0,i.Lk)("div",td,[rd,(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"tipo",id:"","onUpdate:modelValue":e[1]||(e[1]=o=>n.tipoPuestito=o),onChange:e[2]||(e[2]=(...o)=>s.cambiarTipoPuestito&&s.cambiarTipoPuestito(...o))},sd,544),[[r.u1,n.tipoPuestito]])])])),(0,i.Lk)("form",{onSubmit:e[17]||(e[17]=(0,r.D$)(((...o)=>s.modificarPerfil&&s.modificarPerfil(...o)),["prevent"]))},[(0,i.Lk)("div",cd,[(0,i.Lk)("div",ld,[dd,(0,i.Lk)("input",{class:"form-control",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:e[3]||(e[3]=(...o)=>s.imagenSeleccionada&&s.imagenSeleccionada(...o)),style:{display:"none"}},null,32),(0,i.Lk)("a",{class:"btn btn-link",onClick:e[4]||(e[4]=o=>s.triggerFileInput("imagen"))},"Editar")]),n.negocio.imagen?((0,i.uX)(),(0,i.CE)("img",{key:0,class:"imagen round",src:n.negocio.imagen,alt:"",onError:e[5]||(e[5]=(...o)=>s.imagenError&&s.imagenError(...o))},null,40,ud)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",pd,[(0,i.Lk)("div",md,[gd,(0,i.Lk)("input",{class:"form-control",type:"file",name:"portada",id:"portada",accept:"image/jpeg, image/png",onChange:e[6]||(e[6]=(...o)=>s.portadaSeleccionada&&s.portadaSeleccionada(...o)),style:{display:"none"}},null,32),(0,i.Lk)("a",{class:"btn btn-link",onClick:e[7]||(e[7]=o=>s.triggerFileInput("portada"))},"Editar")]),n.negocio.imagen?((0,i.uX)(),(0,i.CE)("img",{key:0,class:"imagen",src:n.negocio.portada,alt:"",onError:e[8]||(e[8]=(...o)=>s.imagenError&&s.imagenError(...o))},null,40,bd)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",hd,[vd,(0,i.Lk)("div",kd,[fd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"nombre",name:"nombre","onUpdate:modelValue":e[9]||(e[9]=o=>n.negocioModificar.nombre=o),placeholder:"Nombre del Negocio",required:""},null,512),[[r.Jo,n.negocioModificar.nombre]])]),(0,i.Lk)("div",Ld,[Cd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"email",id:"correo","onUpdate:modelValue":e[10]||(e[10]=o=>n.negocioModificar.correo=o),placeholder:"Correo"},null,512),[[r.Jo,n.negocioModificar.correo]])]),(0,i.Lk)("div",yd,[wd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number",id:"telefono","onUpdate:modelValue":e[11]||(e[11]=o=>n.negocioModificar.telefono=o),placeholder:"Teléfono"},null,512),[[r.Jo,n.negocioModificar.telefono]])]),(0,i.Lk)("div",xd,[Pd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"direccion","onUpdate:modelValue":e[12]||(e[12]=o=>n.negocioModificar.direccion=o),placeholder:"Dirección"},null,512),[[r.Jo,n.negocioModificar.direccion]])]),(0,i.Lk)("div",Ed,[Sd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"descripcion","onUpdate:modelValue":e[13]||(e[13]=o=>n.negocioModificar.descripcion=o),placeholder:"Descripción",maxlength:"40"},null,512),[[r.Jo,n.negocioModificar.descripcion]])]),(0,i.Lk)("div",Md,[Id,(0,i.bo)((0,i.Lk)("select",{class:"form-select",name:"rubro",id:"rubro","onUpdate:modelValue":e[14]||(e[14]=o=>n.negocioModificar.rubro=o)},_d,512),[[r.u1,n.negocioModificar.rubro]])]),(0,i.Lk)("div",Td,[Nd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"instagram","onUpdate:modelValue":e[15]||(e[15]=o=>n.negocioModificar.instagram=o),placeholder:"Instagram"},null,512),[[r.Jo,n.negocioModificar.instagram]])]),(0,i.Lk)("div",qd,[Fd,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text",id:"facebook","onUpdate:modelValue":e[16]||(e[16]=o=>n.negocioModificar.facebook=o),placeholder:"Facebook"},null,512),[[r.Jo,n.negocioModificar.facebook]])]),Xd])],32)])])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ud,[(0,i.Lk)("div",Rd,[(0,i.Lk)("div",Vd,[zd,(0,i.Lk)("div",Qd,[Dd,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:e[18]||(e[18]=(...o)=>s.cerrarSesion&&s.cerrarSesion(...o))},"Sí, cerrar sesión")])])])]),(0,i.Lk)("div",Wd,[(0,i.Lk)("div",$d,[(0,i.Lk)("div",Bd,[(0,i.Lk)("div",jd,[Od,(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[19]||(e[19]=(...o)=>s.modalCerrado&&s.modalCerrado(...o))})]),Jd])])],512),(0,i.bo)((0,i.Lk)("div",Gd,[(0,i.Lk)("div",Hd,[(0,i.Lk)("div",Kd,[(0,i.Lk)("div",Yd,[(0,i.Lk)("div",Zd,[ou,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[20]||(e[20]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",eu,[(0,i.bo)((0,i.Lk)("div",au,ru,512),[[r.aG,n.cargandoCropper]]),(0,i.Lk)("img",iu,null,512)]),(0,i.Lk)("div",nu,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[21]||(e[21]=(...o)=>s.cerrarCrop&&s.cerrarCrop(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[22]||(e[22]=(...o)=>s.guardarImagenRecortada&&s.guardarImagenRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropImage]]),(0,i.bo)((0,i.Lk)("div",su,[(0,i.Lk)("div",cu,[(0,i.Lk)("div",lu,[(0,i.Lk)("div",du,[(0,i.Lk)("div",uu,[pu,(0,i.Lk)("button",{type:"button",class:"btn-close",onClick:e[23]||(e[23]=(...o)=>s.cerrarCropPortada&&s.cerrarCropPortada(...o)),"aria-label":"Close"})]),(0,i.Lk)("div",mu,[(0,i.bo)((0,i.Lk)("div",gu,hu,512),[[r.aG,n.cargandoCropperPortada]]),(0,i.Lk)("img",vu,null,512)]),(0,i.Lk)("div",ku,[(0,i.Lk)("button",{type:"button",class:"btn",onClick:e[24]||(e[24]=(...o)=>s.cerrarCropPortada&&s.cerrarCropPortada(...o))},"Cerrar"),(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[25]||(e[25]=(...o)=>s.guardarPortadaRecortada&&s.guardarPortadaRecortada(...o))},"Recortar")])])])])],512),[[r.aG,n.modalCropPortada]])])}var Lu={components:{NavbarComponent:qi},data(){return{obteniendoInfo:!1,cargandoCropper:!0,cargandoCropperPortada:!0,modalCropImage:!1,modalCropPortada:!1,cropper:null,cropperPortada:null,imageToCrop:"",fechaVence:"","añoVence":"",negocio:"",negocioModificar:"",tipoPuestito:"",esPremium:""}},mounted(){window.scrollTo({top:0,behavior:"smooth"})},created(){this.obtenerInformacionNegocio()},methods:{triggerFileInput(o){document.getElementById(o).click()},imagenError(o){o.target.src="/recursos/missing.png"},modalAbierto(){document.querySelector("html").style.overflow="hidden"},modalCerrado(){document.querySelector("html").style.overflow="auto"},cerrarSesion(){localStorage.clear(),Dg.push("/")},mejorarPlan(){Dg.push("/u/planes")},modificarPerfil(){this.obteniendoInfo=!0,t.A.put("/modificarPerfil",{negocio:this.negocioModificar}).then((()=>{localStorage.setItem("nombre",this.negocioModificar.nombre);const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Datos modificados."}),setTimeout((function(){location.reload()}),1e3)})).catch((o=>{console.error("Error al actualizar la información en la base de datos:",o),this.obteniendoInfo=!1})).finally((()=>{this.obteniendoInfo=!1}))},async obtenerInformacionNegocio(){try{this.obteniendoInfo=!0;const o=await t.A.get(`/miNegocio?usuario=${localStorage.getItem("usuario")}`);this.negocio=o.data,this.tipoPuestito=this.negocio.tipo,this.negocioModificar=o.data;const e=new Date(o.data.fechaVence);this.añoVence=e.getFullYear();const a=new Date;this.esPremium=a>=e,this.fechaVence=e.getDate()+"/"+(Number(e.getMonth())+1)+"/"+e.getFullYear()}catch(o){console.error("Error al cargar los productos:",o)}finally{this.obteniendoInfo=!1}},async cambiarTipoPuestito(){try{await t.A.put("/cambiarTipoPuestito",{tipo:this.tipoPuestito,usuario:this.negocio.usuario})}catch(o){console.error("Error al cambiar el tipo: ",o)}},portadaSeleccionada(o){try{const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropPortada=!0,window.scrollTo({top:0,behavior:"smooth"});let e=this.$refs.cropperPortada;e.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropperPortada=new st.Ay(e,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='0.75'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoCropperPortada=!1}},async guardarPortadaRecortada(){try{const o=await this.cropperPortada.getCropperSelection().$toCanvas({width:1e3,height:1333});this.negocioModificar.portada=o.toDataURL("image/jpeg",.9)}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropPortada=!1}},imagenSeleccionada(o){try{const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imageToCrop=o.target.result,this.modalCropImage=!0,window.scrollTo({top:0,behavior:"smooth"});let e=this.$refs.cropperImg;e.src=this.imageToCrop,this.$nextTick((()=>{const o=document.querySelector("cropper-canvas");o&&o.parentNode.removeChild(o),this.cropper=new st.Ay(e,{template:"<cropper-canvas background style='height:50vh;'>\n                                    <cropper-image  initial-center-size='contain' alt='Crop' scalable=true translatable></cropper-image>\n                                        <cropper-shade hidden></cropper-shade>\n                                        <cropper-handle  action='move' plain></cropper-handle>\n                                        <cropper-selection initial-coverage='0.5' aspect-ratio='1'  movable resizable>\n                                            <cropper-grid role='grid' covered></cropper-grid>\n                                            <cropper-crosshair centered></cropper-crosshair>\n                                            <cropper-handle action='move'\n                                                theme-color='rgba(255, 255, 255, 0.35)'></cropper-handle>\n                                            <cropper-handle action='ne-resize'></cropper-handle>\n                                            <cropper-handle action='nw-resize'></cropper-handle>\n                                            <cropper-handle action='se-resize'></cropper-handle>\n                                            <cropper-handle action='sw-resize'></cropper-handle>\n                                        </cropper-selection>\n                                    </cropper-canvas >"})}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoCropper=!1}},async guardarImagenRecortada(){try{const o=await this.cropper.getCropperSelection().$toCanvas();this.negocioModificar.imagen=o.toDataURL()}catch(o){console.error("Error al guardar la imagen recortada:",o)}finally{this.modalCropImage=!1}},cerrarCrop(){this.modalCropImage=!1},cerrarCropPortada(){this.modalCropPortada=!1}}};const Cu=(0,h.A)(Lu,[["render",fu],["__scopeId","data-v-0f1cee7e"]]);var yu=Cu;const wu=o=>((0,i.Qi)("data-v-2b55f76b"),o=o(),(0,i.jt)(),o),xu={class:"contenedor"},Pu={class:"mt-4 mb-4"},Eu=wu((()=>(0,i.Lk)("h1",{class:"text-center"},"¡Potenciá tu negocio!",-1))),Su=wu((()=>(0,i.Lk)("hr",null,null,-1))),Mu={key:0},Iu={class:"row justify-content-center text-center mb-4"},Au={class:"col-md-6"},_u=wu((()=>(0,i.Lk)("div",{class:"titulo-plan"},[(0,i.Lk)("h3",null,"Menú Online")],-1))),Tu={class:"border mt-2 p-2 text-center"},Nu=wu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," Gratis ",-1))),qu=wu((()=>(0,i.Lk)("ul",{class:"text-start"},[(0,i.Lk)("li",null,"✅ Página + Menú online."),(0,i.Lk)("li",null,"✅ Visualización en nuestra plataforma."),(0,i.Lk)("li",null,"✅ Código QR para el menú."),(0,i.Lk)("li",null,"⚠️ Carrito y pedidos por WhatsApp.")],-1))),Fu={class:"gris mt-2"},Xu=wu((()=>(0,i.Lk)("br",null,null,-1))),Uu=wu((()=>(0,i.Lk)("hr",null,null,-1))),Ru={class:"row justify-content-center text-center"},Vu=wu((()=>(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("div",{class:"titulo-plan"},[(0,i.Lk)("h3",null,"Carrito Online")]),(0,i.Lk)("div",{class:"mt-2 p-2 text-center"},[(0,i.Lk)("ul",{class:"text-start"},[(0,i.Lk)("li",null,"✅ Página + Menú online."),(0,i.Lk)("li",null,"✅ Visualización en nuestra plataforma."),(0,i.Lk)("li",null,"✅ Código QR para el menú."),(0,i.Lk)("li",null,"✅ Carrito y pedidos por WhatsApp.")])])],-1))),zu={class:"col-md-12"},Qu={class:"mt-2 text-center"},Du={class:"border p-2 m-2 col-md-3"},Wu=wu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," 1 Mes ",-1))),$u=wu((()=>(0,i.Lk)("div",{class:"precio-plan"}," $2500 ",-1))),Bu=wu((()=>(0,i.Lk)("img",{src:"/recursos/mercadopago.png",width:"50",alt:""},null,-1))),ju=wu((()=>(0,i.Lk)("br",null,null,-1))),Ou={class:"border p-2 m-2 col-md-3"},Ju=wu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," 6 Meses ",-1))),Gu=wu((()=>(0,i.Lk)("div",{class:"precio-plan"}," $12500 ",-1))),Hu=wu((()=>(0,i.Lk)("img",{src:"/recursos/mercadopago.png",width:"50",alt:""},null,-1))),Ku=wu((()=>(0,i.Lk)("br",null,null,-1))),Yu={class:"border p-2 m-2 col-md-3"},Zu=wu((()=>(0,i.Lk)("div",{class:"titulo-plan"}," 12 Meses ",-1))),op=wu((()=>(0,i.Lk)("div",{class:"precio-plan"}," $20000 ",-1))),ep=wu((()=>(0,i.Lk)("img",{src:"/recursos/mercadopago.png",width:"50",alt:""},null,-1))),ap=wu((()=>(0,i.Lk)("br",null,null,-1)));function tp(o,e,a,t,r,n){const s=(0,i.g2)("NavbarPublicoComponent");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(s),(0,i.Lk)("div",xu,[(0,i.Lk)("div",Pu,[Eu,Su,r.usuario?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Mu,[(0,i.Lk)("div",Iu,[(0,i.Lk)("div",Au,[_u,(0,i.Lk)("div",Tu,[Nu,qu,(0,i.Lk)("div",Fu,[(0,i.eW)("⚠️ = 1 mes gratis "),Xu,(0,i.Lk)("button",{class:"btn btn-menu mt-2",onClick:e[0]||(e[0]=o=>n.elegirPlan(""))},"REGISTRAR")])])])]),Uu])),(0,i.Lk)("div",Ru,[Vu,(0,i.Lk)("div",zu,[(0,i.Lk)("div",Qu,[(0,i.Lk)("div",Du,[Wu,$u,(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[1]||(e[1]=o=>n.elegirPlan(1))},[Bu,(0,i.eW)("CONTRATAR"),ju,(0,i.eW)("(MercadoPago)")])]),(0,i.Lk)("div",Ou,[Ju,Gu,(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[2]||(e[2]=o=>n.elegirPlan(6))},[Hu,(0,i.eW)("CONTRATAR"),Ku,(0,i.eW)("(MercadoPago)")])]),(0,i.Lk)("div",Yu,[Zu,op,(0,i.Lk)("button",{class:"btn btn-menu",onClick:e[3]||(e[3]=o=>n.elegirPlan(12))},[ep,(0,i.eW)("CONTRATAR"),ap,(0,i.eW)("(MercadoPago)")])])])])])])])])}var rp={data(){return{usuario:""}},components:{NavbarPublicoComponent:nt},mounted(){this.usuario=localStorage.getItem("usuario"),window.scrollTo({top:0,behavior:"smooth"})},methods:{elegirPlan(o){o?(localStorage.setItem("plan",o),Dg.push("/u/registrar")):(console.log("plan nulo"),localStorage.clear(),Dg.push("/u/registrar"))}}};const ip=(0,h.A)(rp,[["render",tp],["__scopeId","data-v-2b55f76b"]]);var np=ip;const sp=o=>((0,i.Qi)("data-v-ef1b6022"),o=o(),(0,i.jt)(),o),cp={key:0,class:"pantalla-carga text-center"},lp=sp((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando...")],-1))),dp=[lp],up={key:1},pp={class:"contenedor text-center"},mp={class:"caja"},gp=sp((()=>(0,i.Lk)("img",{src:"/recursos/approve.png",width:"100"},null,-1))),bp=sp((()=>(0,i.Lk)("h1",null,"Pago Aprobado.",-1))),hp=sp((()=>(0,i.Lk)("p",null," Ya puedes cerrar esta ventana. ",-1))),vp={key:2},kp={class:"contenedor text-center"},fp={class:"caja"},Lp=sp((()=>(0,i.Lk)("img",{src:"/recursos/decline.png",width:"100"},null,-1))),Cp=sp((()=>(0,i.Lk)("h1",null,"No se pudo realizar el pago.",-1))),yp={key:3},wp={class:"contenedor text-center"},xp={class:"caja"},Pp=sp((()=>(0,i.Lk)("img",{src:"/recursos/pending.png",width:"100"},null,-1))),Ep=sp((()=>(0,i.Lk)("h1",null,"Pago Pendiente.",-1)));function Sp(o,e,a,t,r,n){const s=(0,i.g2)("NavbarPublicoComponent"),c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(s),r.cargando?((0,i.uX)(),(0,i.CE)("div",cp,dp)):(0,i.Q3)("",!0),"approved"==r.estado?((0,i.uX)(),(0,i.CE)("div",up,[(0,i.Lk)("div",pp,[(0,i.Lk)("div",mp,[gp,bp,hp,(0,i.Lk)("button",{class:"btn btn-menu mt-2",onClick:e[0]||(e[0]=(...o)=>n.cerrarVentana&&n.cerrarVentana(...o))},"Cerrar")])])])):(0,i.Q3)("",!0),"failure"==r.estado||"null"==r.estado?((0,i.uX)(),(0,i.CE)("div",vp,[(0,i.Lk)("div",kp,[(0,i.Lk)("div",fp,[Lp,Cp,(0,i.bF)(c,{class:"btn btn-menu mt-3",to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver")])),_:1})])])])):(0,i.Q3)("",!0),"pending"==r.estado?((0,i.uX)(),(0,i.CE)("div",yp,[(0,i.Lk)("div",wp,[(0,i.Lk)("div",xp,[Pp,Ep,(0,i.bF)(c,{class:"btn btn-menu mt-3",to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Volver")])),_:1})])])])):(0,i.Q3)("",!0)])}var Mp={components:{NavbarPublicoComponent:nt},data(){return{estado:"",ref:"",cargando:!0}},mounted(){this.guardarPago(),window.scrollTo({top:0,behavior:"smooth"})},methods:{cerrarVentana(){window.close()},async guardarPago(){const o=this.$route.query;try{const e=await t.A.post("/facturar/webhook",o);this.estado=e.data}catch(e){console.log(e)}finally{this.cargando=!1}}}};const Ip=(0,h.A)(Mp,[["render",Sp],["__scopeId","data-v-ef1b6022"]]);var Ap=Ip;const _p={class:"container mt-2 col-md-6"},Tp={class:"border p-2"},Np=(0,i.Lk)("h3",null,"Calcular el % entre 2 números:",-1),qp=(0,i.Lk)("hr",null,null,-1),Fp=(0,i.Lk)("h5",null,"Número Mayor",-1),Xp=(0,i.Lk)("h5",null,"Número Menor",-1),Up={key:0,class:"text-center mt-2"},Rp={class:"border p-2 mt-2"},Vp=(0,i.Lk)("h3",null,"Convertir archivo en audio:",-1),zp=(0,i.Lk)("hr",null,null,-1),Qp={key:0},Dp=(0,i.Lk)("div",{class:"text-center"},"Listo",-1),Wp=[Dp],$p={key:1},Bp=(0,i.Lk)("div",{class:"text-center"},"Procesando...",-1),jp=[Bp],Op=["disabled"],Jp={key:2},Gp={class:"border p-2 mt-2"},Hp=(0,i.Lk)("h3",null,"Convertir audio en texto:",-1),Kp=(0,i.Lk)("hr",null,null,-1),Yp={key:0},Zp=(0,i.Lk)("div",{class:"text-center"},"Procesando...",-1),om=[Zp],em={key:1},am={class:"text-center mt-2"},tm=["disabled"];function rm(o,e,a,t,n,s){return(0,i.uX)(),(0,i.CE)("div",_p,[(0,i.Lk)("div",Tp,[Np,qp,Fp,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number","onUpdate:modelValue":e[0]||(e[0]=o=>n.primerValor=o)},null,512),[[r.Jo,n.primerValor]]),Xp,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"number","onUpdate:modelValue":e[1]||(e[1]=o=>n.segundoValor=o)},null,512),[[r.Jo,n.segundoValor]]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary mt-2",onClick:e[2]||(e[2]=(...o)=>s.calcular&&s.calcular(...o))},"Calcular")]),(0,i.Lk)("div",null,[n.resultado?((0,i.uX)(),(0,i.CE)("h4",Up," El porcentaje que existe entre los números es el "+(0,c.v_)(n.resultado)+"% ",1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Rp,[Vp,zp,(0,i.Lk)("input",{class:"form-control",type:"file",onChange:e[3]||(e[3]=(...o)=>s.handleFileUpload&&s.handleFileUpload(...o)),accept:"image/*,.pdf"},null,32),n.ocrResult?((0,i.uX)(),(0,i.CE)("div",Qp,Wp)):(0,i.Q3)("",!0),n.loading?((0,i.uX)(),(0,i.CE)("div",$p,jp)):(0,i.Q3)("",!0),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary mt-2",disabled:!n.ocrResult,onClick:e[4]||(e[4]=(...o)=>s.convertirATextoAVoz&&s.convertirATextoAVoz(...o))},"Descargar Audio",8,Op)]),n.descargando?((0,i.uX)(),(0,i.CE)("div",Jp,"Descargando...")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Gp,[Hp,Kp,(0,i.Lk)("input",{class:"form-control",type:"file",onChange:e[5]||(e[5]=(...o)=>s.manejarSubidaAudio&&s.manejarSubidaAudio(...o))},null,32),n.loading2?((0,i.uX)(),(0,i.CE)("div",Yp,om)):(0,i.Q3)("",!0),n.transcripcion?((0,i.uX)(),(0,i.CE)("div",em,[(0,i.Lk)("p",am,(0,c.v_)(n.transcripcion),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary mt-2",onClick:e[6]||(e[6]=(...o)=>s.descargarTexto&&s.descargarTexto(...o)),disabled:!n.transcripcion},"Descargar Texto",8,tm)])])])}a(4979),a(4603),a(7566),a(8721);var im=a(3216),nm=a.n(im),sm=a(2553);sm.EA.workerSrc="/pdf.worker.js";var cm={data(){return{primerValor:"",segundoValor:"",resultado:"",ocrResult:null,loading:!1,googleApiKey:"AIzaSyDXluz9Jo4X2O_KMvVXoPz8GrBJnHZ1dcE",audioUrl:null,descargando:!1,loading2:!1,transcripcion:""}},methods:{async manejarSubidaAudio(o){const e=o.target.files[0];if(e){this.loading2=!0;const o=new FormData;o.append("audio",e);try{const e=await t.A.post("/transcribe",o,{headers:{"Content-Type":"multipart/form-data"}});this.transcripcion=e.data.transcription}catch(a){console.error("Error en la transcripción:",a)}finally{this.loading2=!1}}},descargarTexto(){const o=document.createElement("a"),e=new Blob([this.transcripcion],{type:"text/plain"});o.href=URL.createObjectURL(e),o.download="transcripcion.txt",document.body.appendChild(o),o.click()},calcular(){this.resultado=100*(this.primerValor-this.segundoValor)/this.segundoValor},handleFileUpload(o){const e=o.target.files[0];e&&(this.loading=!0,"application/pdf"===e.type?this.processPDF(e):this.processImage(e))},processImage(o){const e=new FileReader;e.onload=()=>{nm().recognize(e.result,"spa",{}).then((({data:{text:o}})=>{this.ocrResult=o,this.loading=!1})).catch((o=>{console.error(o),this.loading=!1}))},e.readAsDataURL(o)},async processPDF(o){const e=new FileReader;e.onload=async()=>{const o=new Uint8Array(e.result),a=await sm.YE({data:o}).promise;let t="";for(let e=1;e<=a.numPages;e++){const o=await a.getPage(e),r=o.getViewport({scale:1}),i=document.createElement("canvas"),n=i.getContext("2d");i.height=r.height,i.width=r.width,await o.render({canvasContext:n,viewport:r}).promise;const s=i.toDataURL(),{data:{text:c}}=await nm().recognize(s,"spa");t+=c+"\n"}this.ocrResult=t,this.loading=!1},e.readAsArrayBuffer(o)},async convertirATextoAVoz(){try{this.descargando=!0;const o=`https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.googleApiKey}`,e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:this.ocrResult},voice:{languageCode:"es-ES",name:"es-ES-Standard-B",ssmlGender:"FEMALE"},audioConfig:{audioEncoding:"MP3"}})});if(!e.ok)throw new Error(`Error al generar el audio: ${e.status} ${e.statusText}`);const{audioContent:a}=await e.json(),t=this.base64ToBlob(a,"audio/mp3"),r=URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=r,i.download="audio.mp3",document.body.appendChild(i),i.click(),URL.revokeObjectURL(r)}catch(o){console.error("Error al convertir texto a voz:",o)}finally{this.descargando=!1}},base64ToBlob(o,e){const a=atob(o),t=[];for(let r=0;r<a.length;r+=512){const o=a.slice(r,r+512),e=new Array(o.length);for(let a=0;a<o.length;a++)e[a]=o.charCodeAt(a);const i=new Uint8Array(e);t.push(i)}return new Blob(t,{type:e})}}};const lm=(0,h.A)(cm,[["render",rm]]);var dm=lm;const um=o=>((0,i.Qi)("data-v-be85e5c0"),o=o(),(0,i.jt)(),o),pm={class:"div-forms pt-4 text-center"},mm=um((()=>(0,i.Lk)("h2",{class:"titulo-div-forms mb-2"},"Tu código QR",-1))),gm={class:"col-md-6"},bm=um((()=>(0,i.Lk)("label",{class:"form-label",for:"qrText"},"Texto de arriba:",-1))),hm={class:"flex"},vm={class:"col-md-6"},km=um((()=>(0,i.Lk)("label",{class:"form-label mt-2",for:"qrTitle"},"Texto de abajo:",-1))),fm={class:"flex"},Lm={class:"col-md-6"},Cm={class:"justify-content-center"},ym=um((()=>(0,i.Lk)("label",{class:"form-label mt-2",for:"qrPortada"},"Utilizar portada como fondo",-1))),wm=um((()=>(0,i.Lk)("br",null,null,-1))),xm={key:0,class:"col-md-"},Pm=um((()=>(0,i.Lk)("label",{for:"qrFondoColor",class:"form-label mt-2"},"Color de fondo",-1))),Em=um((()=>(0,i.Lk)("br",null,null,-1))),Sm={ref:"contenido",class:"mt-4 position-relative"},Mm=["src"],Im={class:"p-4 frente"},Am=["href"],_m=um((()=>(0,i.Lk)("br",null,null,-1))),Tm={class:"col-md-6"};function Nm(o,e,a,t,n,s){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.Lk)("div",pm,[mm,(0,i.Lk)("div",gm,[bm,(0,i.Lk)("div",hm,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",name:"qrText",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.qrText=o)},null,512),[[r.Jo,n.qrText]]),(0,i.bo)((0,i.Lk)("input",{class:"form-control-color",type:"color",name:"qrTextColor","onUpdate:modelValue":e[1]||(e[1]=o=>n.qrTextColor=o)},null,512),[[r.Jo,n.qrTextColor]])])]),(0,i.Lk)("div",vm,[km,(0,i.Lk)("div",fm,[(0,i.bo)((0,i.Lk)("input",{class:"form-control",name:"qrTitle",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>n.qrTitle=o)},null,512),[[r.Jo,n.qrTitle]]),(0,i.bo)((0,i.Lk)("input",{class:"form-control-color",type:"color",name:"qrTitleColor","onUpdate:modelValue":e[3]||(e[3]=o=>n.qrTitleColor=o)},null,512),[[r.Jo,n.qrTitleColor]])])]),(0,i.Lk)("div",Lm,[(0,i.Lk)("div",Cm,[ym,(0,i.bo)((0,i.Lk)("input",{class:"form-control-check",type:"checkbox",name:"qrPortada",id:"","onUpdate:modelValue":e[4]||(e[4]=o=>n.mostrarPortada=o)},null,512),[[r.lH,n.mostrarPortada]]),(0,i.eW)(),wm,n.mostrarPortada?((0,i.uX)(),(0,i.Wv)(d,{key:0,to:"/u/modificar"},{default:(0,i.k6)((()=>[(0,i.eW)("Cambiar portada")])),_:1})):(0,i.Q3)("",!0)])]),n.mostrarPortada?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",xm,[Pm,(0,i.eW)(),Em,(0,i.bo)((0,i.Lk)("input",{class:"form-control-color",type:"color",name:"qrFondoColor","onUpdate:modelValue":e[5]||(e[5]=o=>n.qrFondoColor=o)},null,512),[[r.Jo,n.qrFondoColor]])])),(0,i.Lk)("div",Sm,[n.mostrarPortada?((0,i.uX)(),(0,i.CE)("img",{key:0,class:"portada",src:n.negocio.portada,alt:""},null,8,Mm)):((0,i.uX)(),(0,i.CE)("div",{key:1,class:"fondoColor",style:(0,c.Tr)({backgroundColor:n.qrFondoColor})},null,4)),(0,i.Lk)("div",Im,[(0,i.Lk)("h5",{class:"mt-2 qr-text-consulta",style:(0,c.Tr)({color:n.qrTextColor})},[(0,i.eW)((0,c.v_)(n.qrText),1),(0,i.Lk)("p",{class:"qr-text",style:(0,c.Tr)({color:n.qrTitleColor})},(0,c.v_)(n.qrTitle),5)],4),(0,i.Lk)("a",{style:{color:"black","text-decoration":"none"},ref:"qrcode",href:"https://nazadoto.com/"+n.nombreUsuario,target:"_blank"},null,8,Am),_m])],512),(0,i.Lk)("div",Tm,[(0,i.Lk)("button",{onClick:e[6]||(e[6]=(...o)=>s.descargarQR&&s.descargarQR(...o)),class:"btn btn-menu margenbtn"},"Descargar QR")])])])}var qm=a(852),Fm=a.n(qm),Xm=a(788),Um=a(2125),Rm=a.n(Um),Vm={data(){return{nombreUsuario:"",nombreNegocio:"",negocio:"",qrText:"",qrTitle:"",qrTextColor:"",qrTitleColor:"",qrFondoColor:"#FFFFFF",mostrarPortada:!0}},components:{NavbarComponent:qi,"router-link":y.Wk},mounted(){this.leerUsuario(),this.leerTextoQR(),"admin"!=this.nombreUsuario&&this.generarQR()},created(){this.obtenerInformacionNegocio()},methods:{leerTextoQR(){this.qrText=localStorage.getItem("qrText")||"CONSULTÁ EL",this.qrTitle=localStorage.getItem("qrTitle")||"MENÚ",this.qrTextColor=localStorage.getItem("qrTextColor")||"#000000",this.qrTitleColor=localStorage.getItem("qrTitleColor")||"#000000"},async obtenerInformacionNegocio(){try{this.obteniendoInfo=!0;const o=await t.A.get(`/miNegocio?usuario=${localStorage.getItem("usuario")}`);this.negocio=o.data}catch(o){console.error("Error al cargar los productos:",o)}finally{this.obteniendoInfo=!1}},generarQR(){const o=localStorage.getItem("nombre");if(o){const e=Fm()(0,"L"),a=9;e.size=a;const t="https://nazadoto.com/"+o;e.addData(t),e.make(),this.renderQRCode(e.createImgTag(a,0))}},renderQRCode(o){const e=this.$refs.qrcode;e.innerHTML=o,e.innerHTML+='<div class="mt-2" style="color:white;background: black;border-radius: 10px;">nazadoto.com/'+this.nombreUsuario+"</div>"},leerUsuario(){this.nombreUsuario=localStorage.getItem("usuario"),this.nombreNegocio=localStorage.getItem("nombre")},esAdmin(){return"admin"==localStorage.getItem("usuario")},descargarQR(){const o=this.$refs.contenido;localStorage.setItem("qrText",this.qrText),localStorage.setItem("qrTitle",this.qrTitle),localStorage.setItem("qrTitleColor",this.qrTitleColor),localStorage.setItem("qrTextColor",this.qrTextColor),Rm()(o,{backgroundColor:null}).then((o=>{o.toBlob((o=>{(0,Xm.saveAs)(o,"contenido-"+this.nombreUsuario+".png")}))}))}}};const zm=(0,h.A)(Vm,[["render",Nm],["__scopeId","data-v-be85e5c0"]]);var Qm=zm;const Dm=o=>((0,i.Qi)("data-v-4dcbf92f"),o=o(),(0,i.jt)(),o),Wm={class:"pantalla-carga text-center"},$m=Dm((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Subiendo Publicación ")],-1))),Bm=[$m],jm={class:"container pt-4 text-center"},Om=Dm((()=>(0,i.Lk)("h1",null,"Subir Publicación",-1))),Jm=Dm((()=>(0,i.Lk)("img",{src:"/recursos/back.png",width:"40",alt:""},null,-1))),Gm={class:"col-md-6 m-auto text-start"},Hm=Dm((()=>(0,i.Lk)("label",{class:"form-label",for:"subirImagen"},"Cargar",-1))),Km=Dm((()=>(0,i.Lk)("label",{for:"textoPublicacion"},"Escribe un texto (opcional)",-1))),Ym={key:0,class:"col-md-6 m-auto mt-2 mb-2"},Zm={class:"preview-publicacion",id:"canvasPublicacion"},og={class:"contenedor-imagen"},eg=["src"],ag={key:0,class:"texto-publicacion"},tg={class:"text-center"},rg={key:0,type:"submit",class:"btn btn-menu"},ig={class:"pantalla-cargas text-center"},ng=Dm((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"},"Cargando imagen")],-1))),sg=[ng],cg=Dm((()=>(0,i.Lk)("div",{class:"publicaciones"},null,-1)));function lg(o,e,a,t,n,s){const l=(0,i.g2)("NavbarComponent"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(l),(0,i.bo)((0,i.Lk)("div",Wm,Bm,512),[[r.aG,n.subiendoPublicacion]]),(0,i.Lk)("div",jm,[Om,(0,i.bF)(d,{class:"m-auto",to:"/u/publicaciones"},{default:(0,i.k6)((()=>[Jm])),_:1}),(0,i.Lk)("div",Gm,[(0,i.Lk)("form",{onSubmit:e[2]||(e[2]=(0,r.D$)(((...o)=>s.subir&&s.subir(...o)),["prevent"]))},[Hm,(0,i.Lk)("input",{class:"form-control mb-3",type:"file",name:"imagen",id:"imagen",accept:"image/jpeg, image/png",onChange:e[0]||(e[0]=o=>s.imagenSeleccionada(o))},null,32),Km,(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>n.textoPublicacion=o),maxlength:"50"},null,512),[[r.Jo,n.textoPublicacion]]),n.imgCargada?((0,i.uX)(),(0,i.CE)("div",Ym,[(0,i.Lk)("div",Zm,[(0,i.Lk)("div",og,[(0,i.Lk)("img",{class:"img-publicacion",src:n.imgCargada,alt:"Imagen cargada"},null,8,eg),n.textoPublicacion?((0,i.uX)(),(0,i.CE)("p",ag,(0,c.v_)(n.textoPublicacion),1)):(0,i.Q3)("",!0)])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",tg,[n.imgCargada?((0,i.uX)(),(0,i.CE)("button",rg,"Subir")):(0,i.Q3)("",!0)])],32)]),(0,i.bo)((0,i.Lk)("div",ig,sg,512),[[r.aG,n.cargandoImagen]]),cg])])}var dg={components:{NavbarComponent:qi},data(){return{nombreUsuario:"",cargandoImagen:!1,imgCargada:"",publicacion:"",textoPublicacion:"",widthImg:0,subiendoPublicacion:!1}},mounted(){this.nombreUsuario=localStorage.getItem("usuario")},methods:{setImageWidth(o){this.widthImg=o.target.width},async subir(){try{this.subiendoPublicacion=!0;const o=document.getElementById("canvasPublicacion"),e=await Rm()(o),a=e.toDataURL("image/png");await t.A.post("/nuevaPublicacion",{usuario:this.nombreUsuario,publicacion:a}).then((()=>{const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Publicación exitosa."}),setTimeout((function(){Dg.push("/u/publicaciones")}),1e3)})).catch((o=>{Lo().fire({icon:"error",text:"No se pudo publicar."+o})}))}catch(o){console.error("Error al subir la publicación:",o)}finally{this.subiendoPublicacion=!0}},imagenSeleccionada(o){try{this.cargandoImagen=!0;const e=o.target.files[0];if(e){const o=new FileReader;o.onload=async o=>{this.imgCargada=o.target.result,this.$nextTick((()=>{const o=document.querySelector(".img-publicacion");o&&(this.widthImg=o.offsetWidth)}))},o.readAsDataURL(e)}}catch(e){console.log(e)}finally{this.cargandoImagen=!1}}}};const ug=(0,h.A)(dg,[["render",lg],["__scopeId","data-v-4dcbf92f"]]);var pg=ug;const mg=o=>((0,i.Qi)("data-v-2c85e69f"),o=o(),(0,i.jt)(),o),gg={class:"container pt-4 text-center"},bg={class:"pantalla-carga text-center"},hg=mg((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Cargando Publicaciones ")],-1))),vg=[hg],kg={class:"pantalla-carga text-center"},fg=mg((()=>(0,i.Lk)("div",{class:"logo-carga"},[(0,i.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,i.Lk)("div",{class:"texto-carga"}," Borrando Publicacion ")],-1))),Lg=[fg],Cg=mg((()=>(0,i.Lk)("h1",null,"Publicaciones",-1))),yg={key:0},wg=mg((()=>(0,i.Lk)("img",{src:"/recursos/plus.png",width:"40",alt:""},null,-1))),xg=mg((()=>(0,i.Lk)("hr",null,null,-1))),Pg={class:"div-publicaciones"},Eg={class:"item-publicacion"},Sg={class:"btn-borrar"},Mg=["onClick"],Ig=["src"],Ag={class:"modal fade",id:"borrarPublicacion",tabindex:"-1","aria-labelledby":"borrarPublicacionLabel","aria-hidden":"true"},_g={class:"modal-dialog"},Tg={class:"modal-content"},Ng=mg((()=>(0,i.Lk)("div",{class:"modal-header text-center"},[(0,i.Lk)("h1",{class:"modal-title fs-5",id:"borrarPublicacionLabel"},"¿Borrar?"),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),qg={class:"modal-footer text-center"},Fg=mg((()=>(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"No",-1)));function Xg(o,e,a,t,n,s){const c=(0,i.g2)("NavbarComponent"),l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(c),(0,i.Lk)("div",gg,[(0,i.bo)((0,i.Lk)("div",bg,vg,512),[[r.aG,n.cargandoPublicaciones]]),(0,i.bo)((0,i.Lk)("div",kg,Lg,512),[[r.aG,n.borrandoPublicacion]]),Cg,0==n.publicaciones.length?((0,i.uX)(),(0,i.CE)("p",yg,"No hay publicaciones aún.")):(0,i.Q3)("",!0),(0,i.bF)(l,{class:"m-auto",to:"/u/nuevapublicacion"},{default:(0,i.k6)((()=>[wg])),_:1}),xg,(0,i.Lk)("div",Pg,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.publicaciones,((o,e)=>((0,i.uX)(),(0,i.CE)("div",{key:e},[(0,i.Lk)("div",Eg,[(0,i.Lk)("div",Sg,[(0,i.Lk)("button",{onClick:e=>s.publicacionPorBorrarMethod(o.publicacion),class:"btn-close","data-bs-toggle":"modal","data-bs-target":"#borrarPublicacion"},null,8,Mg)]),(0,i.Lk)("img",{class:"publicacion",src:o.publicacion,alt:""},null,8,Ig)])])))),128))]),(0,i.Lk)("div",Ag,[(0,i.Lk)("div",_g,[(0,i.Lk)("div",Tg,[Ng,(0,i.Lk)("div",qg,[Fg,(0,i.Lk)("button",{type:"button",class:"btn btn-menu-danger","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...o)=>s.borrarPublicacion&&s.borrarPublicacion(...o))},"Sí, borrar")])])])])])])}var Ug={components:{NavbarComponent:qi},data(){return{nombreUsuario:"",publicaciones:[],cargandoPublicaciones:!0,publicacionPorBorrar:"",borrandoPublicacion:!1}},mounted(){this.nombreUsuario=localStorage.getItem("usuario"),this.fetchPublicaciones(),window.scrollTo({top:0,behavior:"smooth"})},methods:{publicacionPorBorrarMethod(o){this.publicacionPorBorrar=o,console.log(this.publicacionPorBorrar)},async borrarPublicacion(){try{this.borrandoPublicacion=!0,await t.A.delete(`/borrarPublicacion?publicacion=${this.publicacionPorBorrar}`).then((()=>{const o=Lo().mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",Lo().stopTimer),o.addEventListener("mouseleave",Lo().resumeTimer)}});o.fire({icon:"success",title:"Publicación borrada."}),setTimeout((function(){location.reload()}),1e3)})).catch((()=>{Lo().fire({icon:"error",text:"No se pudo borrar."})}))}catch(o){console.error(o)}finally{this.borrandoPublicacion=!1}},setImageWidth(o){this.widthImg=o.target.width},async fetchPublicaciones(){try{const o=await t.A.get(`/publicaciones?usuario=${this.nombreUsuario}`);this.publicaciones=o.data.sort(((o,e)=>e.id-o.id))}catch(o){console.error(o)}finally{this.cargandoPublicaciones=!1}}}};const Rg=(0,h.A)(Ug,[["render",Xg],["__scopeId","data-v-2c85e69f"]]);var Vg=Rg;const zg=[{path:"/",component:Me},{path:"/u/calcular",component:dm,meta:{requiresAuth:!1}},{path:"/u/publicaciones",component:Vg,meta:{requiresAuth:!0}},{path:"/u/nuevapublicacion",component:pg,meta:{requiresAuth:!0}},{path:"/u/home",component:wo,meta:{requiresAuth:!0}},{path:"/u/crearqr",component:Qm,meta:{requiresAuth:!0}},{path:"/u/login",component:Be,meta:{requiresAuth:!1}},{path:"/u/registrar",component:dt,meta:{requiresAuth:!1}},{path:"/u/planes",component:np,meta:{requiresAuth:!1}},{path:"/u/registrar/return",component:Ap,meta:{requiresAuth:!1}},{path:"/u/negocios",component:ir,meta:{requiresAuth:!0}},{path:"/u/modificar",component:yu,meta:{requiresAuth:!0}},{path:"/u/nuevoProducto",component:Ri,meta:{requiresAuth:!0}},{path:"/u/productos",component:ws,meta:{requiresAuth:!0}},{path:"/:nombreNegocio",component:zl,meta:{requiresAuth:!1}}],Qg=(0,y.aE)({history:(0,y.LA)("/puestito-online"),routes:zg,linkActiveClass:"active",linkExactActiveClass:"active"});Qg.beforeEach(((o,e,a)=>{const t=localStorage.getItem("token");o.matched.some((o=>o.meta.requiresAuth))?t?a():a("/"):a()}));var Dg=Qg,Wg=a(4679);const $g="prod";t.A.defaults.baseURL="dev"==$g?"http://192.168.1.235:3500":"https://nazadoto.com:3500";const Bg=(0,r.Ef)(C);Bg.use(Dg),Bg.use(Wg.Ay,{load:{key:"AIzaSyC8vrGiWbmnS138WURJk2odQ9HU_BIEz9s"}}),Bg.mount("#app")}},e={};function a(t){var r=e[t];if(void 0!==r)return r.exports;var i=e[t]={exports:{}};return o[t].call(i.exports,i,i.exports,a),i.exports}a.m=o,function(){var o=[];a.O=function(e,t,r,i){if(!t){var n=1/0;for(d=0;d<o.length;d++){t=o[d][0],r=o[d][1],i=o[d][2];for(var s=!0,c=0;c<t.length;c++)(!1&i||n>=i)&&Object.keys(a.O).every((function(o){return a.O[o](t[c])}))?t.splice(c--,1):(s=!1,i<n&&(n=i));if(s){o.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=o.length;d>0&&o[d-1][2]>i;d--)o[d]=o[d-1];o[d]=[t,r,i]}}(),function(){a.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return a.d(e,{a:e}),e}}(),function(){a.d=function(o,e){for(var t in e)a.o(e,t)&&!a.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){a.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)}}(),function(){a.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}(),function(){var o={524:0};a.O.j=function(e){return 0===o[e]};var e=function(e,t){var r,i,n=t[0],s=t[1],c=t[2],l=0;if(n.some((function(e){return 0!==o[e]}))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var d=c(a)}for(e&&e(t);l<n.length;l++)i=n[l],a.o(o,i)&&o[i]&&o[i][0](),o[i]=0;return a.O(d)},t=self["webpackChunkmenu"]=self["webpackChunkmenu"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(4300)}));t=a.O(t)})();
//# sourceMappingURL=app.ee2fcd8a.js.map